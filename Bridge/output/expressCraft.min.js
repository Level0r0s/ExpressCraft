Bridge.assembly("ExpressCraft",function($asm){"use strict";Bridge.define("ExpressCraft.App",{statics:{untiTestLiveAdd:function(){var dt=new ExpressCraft.DataTable,sw,r,i;for(dt.addColumn("Index",ExpressCraft.DataType.Integer),dt.addColumn("A",ExpressCraft.DataType.Integer),dt.addColumn("B",ExpressCraft.DataType.Integer),dt.addColumn("C",ExpressCraft.DataType.Integer),sw=System.Diagnostics.Stopwatch.startNew(),r=new System.Random.ctor,i=0;i<1e5;i=i+1|0)dt.addRow$1([i,r.next(),r.next(),r.next()]);return sw.stop(),dt},unitTestBatchAdd:function(){var dt=new ExpressCraft.DataTable,sw,i,dr;for(dt.addColumn("CNTR",ExpressCraft.DataType.Long),dt.addColumn("Name",ExpressCraft.DataType.String),dt.addColumn("Date",ExpressCraft.DataType.DateTime),dt.beginNewRow(1e6),sw=System.Diagnostics.Stopwatch.startNew(),i=System.Int64(0);i.lt(System.Int64(1e6));i=i.inc())dr=dt.newRow(),dr.setItem(0,i),dr.setItem(1,"this is a new test"),dr.setItem(2,new Date);sw.stop();Bridge.global.alert("took: "+sw.milliseconds()+"ms to set data for 1000000 row(s)");sw=System.Diagnostics.Stopwatch.startNew();dt.acceptNewRows();sw.stop();Bridge.global.alert("took: "+sw.milliseconds()+"ms to add 1000000 row(s)")}},$main:function(){ExpressCraft.Settings.setup()}});Bridge.define("ExpressCraft.Application",{statics:{close:function(){window.close();window.location.reload()},run:function(Mainform){Mainform.showStartNewLevel()}}});Bridge.define("ExpressCraft.CellApparence",{isBold:!1,alignment:"left",forecolor:null,ctor:function(){this.$initialize()},$ctor1:function(isBold){this.$initialize();this.isBold=isBold},$ctor2:function(isBold,alignment){this.$initialize();this.isBold=isBold;this.alignment=alignment},$ctor3:function(isBold,alignment,forecolor){this.$initialize();this.isBold=isBold;this.alignment=alignment;this.forecolor=forecolor}});Bridge.define("ExpressCraft.Control",{statics:{ControlClass:"control",canvas:null,getControlClass:function(AddSpace){return AddSpace===void 0&&(AddSpace=!0),AddSpace?" control":ExpressCraft.Control.ControlClass},getImageString:function(source){return System.String.format("url('data:image/png;base64,{0}') no-repeat",source)},getImageStringURI:function(source,useResourceURL){return useResourceURL===void 0&&(useResourceURL=!0),System.String.format("url('{0}{1}') no-repeat",useResourceURL?ExpressCraft.Settings.resourceURL:"",source)},createDiv:function(){return Bridge.merge(document.createElement("div"),{className:ExpressCraft.Control.getControlClass(!1)})},createDiv$1:function(classname){return Bridge.merge(document.createElement("div"),{className:System.String.concat(classname,ExpressCraft.Control.getControlClass(!0))})},createSpan:function(){return Bridge.merge(document.createElement("span"),{className:ExpressCraft.Control.getControlClass(!1)})},createSpan$1:function(classname){return Bridge.merge(document.createElement("span"),{className:System.String.concat(classname,ExpressCraft.Control.getControlClass(!0))})},createLabel$1:function(Caption,X,Y,IsBold,IsTiny){IsBold===void 0&&(IsBold=!1);IsTiny===void 0&&(IsTiny=!1);var lbl=Bridge.merge(document.createElement("span"),{className:ExpressCraft.Control.getControlClass(!1)});return lbl.innerHTML=Caption,ExpressCraft.Helper.setLocation$2(lbl,X,Y),IsBold&&(lbl.style.fontWeight="bold"),IsTiny&&(lbl.style.fontSize="6.75pt"),lbl},createLabel$4:function(Caption,X,Y,width,height,IsBold,IsTiny,classr,Alignment,Forecolor){IsBold===void 0&&(IsBold=!1);IsTiny===void 0&&(IsTiny=!1);classr===void 0&&(classr="");Alignment===void 0&&(Alignment=3);Forecolor===void 0&&(Forecolor=null);var lbl=Bridge.merge(document.createElement("span"),{className:System.String.concat(classr,ExpressCraft.Control.getControlClass(!System.String.isNullOrWhiteSpace(classr)))});return lbl.innerHTML=Caption,ExpressCraft.Helper.setBounds$2(lbl,X,Y,width,height),Alignment!=="left"&&(lbl.style.textAlign=Alignment),IsBold&&(lbl.style.fontWeight="bold"),IsTiny&&(lbl.style.fontSize="6.75pt"),Forecolor!=null&&(lbl.style.color=Forecolor),lbl},createLabel$2:function(Caption,X,Y,width,IsBold,IsTiny,classr,Alignment,Forecolor){IsBold===void 0&&(IsBold=!1);IsTiny===void 0&&(IsTiny=!1);classr===void 0&&(classr="");Alignment===void 0&&(Alignment=3);Forecolor===void 0&&(Forecolor=null);var lbl=Bridge.merge(document.createElement("span"),{className:System.String.concat(classr,ExpressCraft.Control.getControlClass(!System.String.isNullOrWhiteSpace(classr)))});return lbl.innerHTML=Caption,ExpressCraft.Helper.setLocation$2(lbl,X,Y),lbl.style.width=ExpressCraft.Helper.toPx$2(width),Alignment!=="left"&&(Alignment==="right"?lbl.style.direction="rtl":lbl.style.textAlign=Alignment),IsBold&&(lbl.style.fontWeight="bold"),IsTiny&&(lbl.style.fontSize="6.75pt"),Forecolor!=null&&(lbl.style.color=Forecolor),lbl},createLabel$3:function(Caption,X,Y,width,height,IsBold,IsTiny,classr){IsBold===void 0&&(IsBold=!1);IsTiny===void 0&&(IsTiny=!1);classr===void 0&&(classr="");var lbl=Bridge.merge(document.createElement("span"),{className:System.String.concat(classr,ExpressCraft.Control.getControlClass(!System.String.isNullOrWhiteSpace(classr)))});return lbl.innerHTML=Caption,ExpressCraft.Helper.setBounds$2(lbl,X,Y,width,height),IsBold&&(lbl.style.fontWeight="bold"),IsTiny&&(lbl.style.fontSize="6.75pt"),lbl},createLabel:function(Caption,X,Y,IsBold,IsTiny){return IsBold===void 0&&(IsBold=!1),IsTiny===void 0&&(IsTiny=!1),ExpressCraft.Control.createLabel$1(Caption,X,Y,IsBold,IsTiny)},createComboBox:function(classname,comboType){var combo=Bridge.merge(document.createElement("select"),{className:System.String.concat(classname,ExpressCraft.Control.getControlClass(!0))});return comboType===ExpressCraft.ComboBoxTypes.Default,combo},createButton:function(classname,buttonType){return Bridge.merge(document.createElement("button"),{className:System.String.concat(classname,ExpressCraft.Control.getControlClass(!0)),type:buttonType})},createInput:function(classname,inputType){return Bridge.merge(document.createElement("input"),{className:System.String.concat(classname,ExpressCraft.Control.getControlClass(!0)),type:inputType})},op_Implicit:function(control){return ExpressCraft.Settings.renderControlsOnAdd&&control.getHasRendered()===!1&&control.render(),control.content}},content:null,onResize:null,onLoaded:null,config:{properties:{Name:null,HasRendered:!1}},ctor:function(){this.$initialize();this.content=ExpressCraft.Control.createDiv()},$ctor1:function(classname){this.$initialize();this.content=ExpressCraft.Control.createDiv$1(classname)},$ctor2:function(classname,buttonType){this.$initialize();this.content=ExpressCraft.Control.createButton(classname,buttonType)},$ctor4:function(classname,comboType){this.$initialize();this.content=ExpressCraft.Control.createComboBox(classname,comboType)},$ctor3:function(classname,inputType){this.$initialize();this.content=ExpressCraft.Control.createInput(classname,inputType)},render:function(){this.setHasRendered(!0)},getTextMetrics:function(text,font){ExpressCraft.Control.canvas==null&&(ExpressCraft.Control.canvas=document.createElement("canvas"));var context=ExpressCraft.Control.canvas.getContext("2d");return context.font=font,context.measureText(text)},getTextWidth:function(text,font){var metrics=this.getTextMetrics(text,font);return metrics.width},changeState:function(state,stateFlag){stateFlag===void 0&&(stateFlag="disabled");state?this.content.classList.remove(stateFlag):this.content.classList.add(stateFlag)}});Bridge.define("ExpressCraft.ComboBoxTypes",{$kind:"enum",statics:{Default:0}});Bridge.define("ExpressCraft.DataColumn",{fieldName:null,dataType:0,getDisplayValue$1:function(rowIndex,formatString){switch(this.dataType){default:case ExpressCraft.DataType.Object:return System.String.format(formatString,Bridge.cast(this,ExpressCraft.DataColumnObject).cells.getItem(rowIndex));case ExpressCraft.DataType.DateTime:return System.String.format(formatString,Bridge.cast(this,ExpressCraft.DataColumnDateTime).cells.getItem(rowIndex));case ExpressCraft.DataType.String:return System.String.format(formatString,Bridge.cast(this,ExpressCraft.DataColumnString).cells.getItem(rowIndex));case ExpressCraft.DataType.Integer:return System.String.format(formatString,Bridge.cast(this,ExpressCraft.DataColumnInteger).cells.getItem(rowIndex));case ExpressCraft.DataType.Long:return System.String.format(formatString,Bridge.cast(this,ExpressCraft.DataColumnLong).cells.getItem(rowIndex));case ExpressCraft.DataType.Float:return System.String.format(formatString,Bridge.cast(this,ExpressCraft.DataColumnFloat).cells.getItem(rowIndex));case ExpressCraft.DataType.Double:return System.String.format(formatString,Bridge.cast(this,ExpressCraft.DataColumnDouble).cells.getItem(rowIndex));case ExpressCraft.DataType.Decimal:return System.String.format(formatString,Bridge.cast(this,ExpressCraft.DataColumnDecimal).cells.getItem(rowIndex))}},getDisplayValue:function(rowIndex){switch(this.dataType){default:case ExpressCraft.DataType.Object:return System.Convert.toString(Bridge.cast(this,ExpressCraft.DataColumnObject).cells.getItem(rowIndex));case ExpressCraft.DataType.DateTime:return System.Convert.toString(Bridge.cast(this,ExpressCraft.DataColumnDateTime).cells.getItem(rowIndex));case ExpressCraft.DataType.String:return Bridge.cast(this,ExpressCraft.DataColumnString).cells.getItem(rowIndex);case ExpressCraft.DataType.Integer:return System.Convert.toString(Bridge.cast(this,ExpressCraft.DataColumnInteger).cells.getItem(rowIndex));case ExpressCraft.DataType.Long:return System.Convert.toString(Bridge.cast(this,ExpressCraft.DataColumnLong).cells.getItem(rowIndex));case ExpressCraft.DataType.Float:return System.Convert.toString(Bridge.cast(this,ExpressCraft.DataColumnFloat).cells.getItem(rowIndex));case ExpressCraft.DataType.Double:return System.Convert.toString(Bridge.cast(this,ExpressCraft.DataColumnDouble).cells.getItem(rowIndex));case ExpressCraft.DataType.Decimal:return System.Convert.toString(Bridge.cast(this,ExpressCraft.DataColumnDecimal).cells.getItem(rowIndex))}}});Bridge.define("ExpressCraft.DataItem",{text:null,value:null,$ctor1:function(text,value){this.$initialize();this.text=text;this.value=value},ctor:function(text){this.$initialize();this.text=text;this.value=text}});Bridge.define("ExpressCraft.DataRow",{parentTable:null,rowIndex:0,batchData:null,ctor:function(parentTable,rowIndex){rowIndex===void 0&&(rowIndex=-1);this.$initialize();this.parentTable=parentTable;this.rowIndex=rowIndex;rowIndex===-1&&(this.batchData=System.Array.init(parentTable.getColumnCount(),null))},getItem:function(columnIndex){if(this.rowIndex===-1)return this.batchData[columnIndex];var col=this.parentTable.columns.getItem(columnIndex);return col.cells.items[this.rowIndex]},setItem:function(columnIndex,value){if(this.rowIndex===-1){this.batchData[columnIndex]=value;return}var col=this.parentTable.columns.getItem(columnIndex);col.cells.items[this.rowIndex]=value}});Bridge.define("ExpressCraft.DataTable",{columns:null,rowSizeChanged:null,_ColCount:0,_RowCount:0,newRows:null,config:{init:function(){this.columns=new(System.Collections.Generic.List$1(ExpressCraft.DataColumn));this.newRows=new(System.Collections.Generic.List$1(ExpressCraft.DataRow))}},getColumnCount:function(){return this._ColCount},getRowCount:function(){return this._RowCount},getItem:function(rowIndex){return new ExpressCraft.DataRow(this,rowIndex)},addColumn:function(fieldName,type){type===void 0&&(type=0);switch(type){default:case ExpressCraft.DataType.Object:this.columns.add(Bridge.merge(new ExpressCraft.DataColumnObject,{fieldName:fieldName}));break;case ExpressCraft.DataType.DateTime:this.columns.add(Bridge.merge(new ExpressCraft.DataColumnDateTime,{fieldName:fieldName}));break;case ExpressCraft.DataType.String:this.columns.add(Bridge.merge(new ExpressCraft.DataColumnString,{fieldName:fieldName}));break;case ExpressCraft.DataType.Integer:this.columns.add(Bridge.merge(new ExpressCraft.DataColumnInteger,{fieldName:fieldName}));break;case ExpressCraft.DataType.Long:this.columns.add(Bridge.merge(new ExpressCraft.DataColumnLong,{fieldName:fieldName}));break;case ExpressCraft.DataType.Float:this.columns.add(Bridge.merge(new ExpressCraft.DataColumnFloat,{fieldName:fieldName}));break;case ExpressCraft.DataType.Double:this.columns.add(Bridge.merge(new ExpressCraft.DataColumnDouble,{fieldName:fieldName}));break;case ExpressCraft.DataType.Decimal:this.columns.add(Bridge.merge(new ExpressCraft.DataColumnDecimal,{fieldName:fieldName}))}this._ColCount=this.columns.getCount()},beginNewRow:function(EstimatedNewRows){this.newRows=new(System.Collections.Generic.List$1(ExpressCraft.DataRow))(EstimatedNewRows)},addRow:function(){for(var col,dr=new ExpressCraft.DataRow(this,Bridge.identity(this._RowCount,this._RowCount=this._RowCount+1|0)),colLength=this.columns.getCount(),x=0;x<colLength;x=x+1|0)col=this.columns.getItem(x),col.cells.add(null);return Bridge.staticEquals(this.rowSizeChanged,null)||this.rowSizeChanged(this.getRowCount()),dr},addRow$1:function(row){var colLength,x,col;if(row===void 0&&(row=[]),row.length===this.getColumnCount()){for(this._RowCount=this._RowCount+1|0,colLength=this.columns.getCount(),x=0;x<colLength;x=x+1|0)col=this.columns.getItem(x),col.cells.add(row[x]);Bridge.staticEquals(this.rowSizeChanged,null)||this.rowSizeChanged(this.getRowCount())}},newRow:function(){var dr=new ExpressCraft.DataRow(this);return this.newRows.add(dr),dr},acceptNewRows:function(){var x,col,DataCells,y,y1,y2;if(this.newRows!=null&&this.newRows.getCount()!==0){var colLength=this.columns.getCount(),rowLength=this.newRows.getCount(),colN1=colLength-1|0;for(x=0;x<colLength;x=x+1|0){if(col=this.columns.getItem(x),DataCells=System.Array.init(rowLength,null),x===0)for(y=0;y<rowLength;y=y+1|0)this.newRows.getItem(y).rowIndex=Bridge.identity(this._RowCount,this._RowCount=this._RowCount+1|0),DataCells[y]=this.newRows.getItem(y).batchData[x];else if(x===colN1)for(y1=0;y1<rowLength;y1=y1+1|0)DataCells[y1]=this.newRows.getItem(y1).batchData[x],this.newRows.getItem(y1).batchData=null;else for(y2=0;y2<rowLength;y2=y2+1|0)DataCells[y2]=this.newRows.getItem(y2).batchData[x];col.cells.addRange(DataCells)}this.newRows.clear();Bridge.staticEquals(this.rowSizeChanged,null)||this.rowSizeChanged(this.getRowCount())}},rejectNewRows:function(){this.newRows.clear()}});Bridge.define("ExpressCraft.DataType",{$kind:"enum",statics:{Object:0,DateTime:1,String:2,Integer:3,Long:4,Float:5,Double:6,Decimal:7}});Bridge.define("ExpressCraft.DialogResult",{resultEnum:0,callBack:null,ctor:function(resultEnum,callBack){this.$initialize();this.resultEnum=resultEnum;this.callBack=callBack},invokeIfResult:function(resultEnum){resultEnum!==this.resultEnum||Bridge.staticEquals(this.callBack,null)||this.callBack()}});Bridge.define("ExpressCraft.DialogResultEnum",{$kind:"enum",statics:{None:0,OK:1,Cancel:2,Abort:3,Retry:4,Ignore:5,Yes:6,No:7}});Bridge.define("ExpressCraft.Form.FormButtonType",{$kind:"enum",statics:{Close:0,Maximize:1,Minimize:2,Restore:3,Help:4}});Bridge.define("ExpressCraft.Form.FormStartPosition",{$kind:"enum",statics:{Manual:0,Center:1,WindowsDefaultLocation:2}});Bridge.define("ExpressCraft.Form.MouseMoveAction",{$kind:"enum",statics:{None:0,Move:1,TopLeftResize:2,LeftResize:3,BottomLeftResize:4,BottomResize:5,BottomRightResize:6,RightResize:7,TopResize:8,TopRightResize:9}});Bridge.define("ExpressCraft.Form.WindowState",{$kind:"enum",statics:{Normal:0,Minimized:1,Maximized:2}});Bridge.define("ExpressCraft.FormCollection",{formOwner:null,visibleForms:null,config:{init:function(){this.visibleForms=new(System.Collections.Generic.List$1(ExpressCraft.Form))}},ctor:function(formOwner){this.$initialize();this.formOwner=formOwner}});Bridge.define("ExpressCraft.GridViewColumn",{column:null,view:null,caption:null,visible:!1,cachedX:0,formatString:"",headingApparence:null,bodyApparence:null,sortedMode:0,_width:0,config:{init:function(){this.headingApparence=new ExpressCraft.CellApparence.ctor;this.bodyApparence=new ExpressCraft.CellApparence.ctor}},ctor:function(view,width){width===void 0&&(width=100);this.$initialize();this.view=view;this.setWidth(width)},getWidth:function(){return this._width},setWidth:function(value){value<100&&(value=100);this._width!==value&&(this._width=value,this.view.renderGrid())},getDisplayValueByDataRowHandle:function(RowHandle){return System.String.isNullOrWhiteSpace(this.formatString)?this.column.getDisplayValue(RowHandle):this.column.getDisplayValue$1(RowHandle,this.formatString)},getDisplayValue:function(RowHandle){return this.view.visibleRowHandles!=null&&(RowHandle=this.view.visibleRowHandles.getItem(RowHandle)),System.String.isNullOrWhiteSpace(this.formatString)?this.column.getDisplayValue(RowHandle):this.column.getDisplayValue$1(RowHandle,this.formatString)}});Bridge.define("ExpressCraft.HardSoftList$1",function(T){return{hardList:null,softList:null,hardHardList:null,limit:0,hardLength:0,defaultValue:Bridge.getDefaultValue(T),config:{init:function(){this.hardList=new(System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)));this.softList=new(System.Collections.Generic.List$1(System.Int32));this.hardHardList=new(System.Collections.Generic.List$1(T))}},ctor:function(defaultValue,limit){limit===void 0&&(limit=1e4);this.$initialize();this.defaultValue=defaultValue;this.limit=limit},getIndexValueByHardListIndex:function(index){return this.hardList.getItem(index)},clearAll:function(){this.hardHardList=new(System.Collections.Generic.List$1(T));this.hardList=new(System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)));this.softList=new(System.Collections.Generic.List$1(System.Int32));this.hardLength=0},clearAllSetHardRange:function(value,Indexs){var max,i,length,i1,i2,i3,i4;if(Indexs===void 0&&(Indexs=[]),this.hardLength=0,Indexs==null||Indexs.length===0)this.clearAll();else if(Indexs.length>this.limit){for(this.hardLength=Indexs.length,this.hardList=new(System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T))),this.softList=new(System.Collections.Generic.List$1(System.Int32)),max=0,i=0;i<this.hardLength;i=i+1|0)Indexs[i]>max&&(max=Indexs[i]);if(length=max+1|0,this.hardHardList=new(System.Collections.Generic.List$1(T))(length),length===Indexs.length)for(i1=0;i1<this.hardLength;i1=i1+1|0)this.hardHardList.add(value);else{for(i2=0;i2<length;i2=i2+1|0)this.hardHardList.add(this.defaultValue);for(i3=0;i3<this.hardLength;i3=i3+1|0)this.hardHardList.setItem(Indexs[i3],value)}}else{for(this.hardHardList=new(System.Collections.Generic.List$1(T)),this.hardLength=Indexs.length,this.hardList=new(System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)))(this.hardLength),i4=0;i4<this.hardLength;i4=i4+1|0)this.hardList.add(new(ExpressCraft.IndexValue$1(T))(Indexs[i4],value));this.softList=new(System.Collections.Generic.List$1(System.Int32))}},clearSoftList:function(){this.softList=new(System.Collections.Generic.List$1(System.Int32))},clearAndAddOrSet:function(value,index,AddToSoftList){AddToSoftList===void 0&&(AddToSoftList=!1);this.hardHardList=new(System.Collections.Generic.List$1(T));this.hardList=new(System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)));this.softList=new(System.Collections.Generic.List$1(System.Int32));this.hardLength=0;this.addOrSet(value,index,AddToSoftList)},getHardOrSoftIndexValue:function(index,AddToSoftList){var length,i,slI,i1,hli;for(AddToSoftList===void 0&&(AddToSoftList=!1),length=this.softList.getCount(),i=0;i<length;i=i+1|0)if(slI=this.softList.getItem(i),this.hardList.getItem(slI).index===index)return this.hardList.getItem(slI);for(length=this.hardList.getCount(),i1=0;i1<length;i1=i1+1|0)if(hli=this.hardList.getItem(i1),hli.index===index)return AddToSoftList&&this.softList.add(i1),hli;return null},getHardIndexValue:function(index){for(var hli,length=this.hardList.getCount(),i=0;i<length;i=i+1|0)if(hli=this.hardList.getItem(i),hli.index===index.v)return index.v=i,hli;return index.v=length,null},getValue:function(index,AddToSoftList){if(AddToSoftList===void 0&&(AddToSoftList=!1),this.hardLength>this.limit)return this.hardHardList.getItem(index);var hiv=this.getHardOrSoftIndexValue(index,AddToSoftList);return hiv==null?this.defaultValue:hiv.value},getIndex:function(index){if(this.hardLength>this.limit)return index;var hiv=this.getHardOrSoftIndexValue(index);return hiv==null?-1:hiv.index},addOrSet:function(value,index,AddToSoftList){var addDiff,data,i,length,i1,hli,hindex,hiv;if(AddToSoftList===void 0&&(AddToSoftList=!1),this.hardLength>this.limit){if(index>=this.hardLength){if(addDiff=(index+1|0)-this.hardHardList.getCount()|0,addDiff>0){for(data=System.Array.init(addDiff,function(){return Bridge.getDefaultValue(T)}),i=0;i<addDiff;i=i+1|0)data[i]=this.defaultValue;this.hardHardList.addRange(data)}this.hardHardList.add(value);this.hardLength=this.hardHardList.getCount()}else this.hardHardList.setItem(index,value);return}for(length=this.softList.getCount(),i1=0;i1<length;i1=i1+1|0)if(hli=this.hardList.getItem(this.softList.getItem(i1)),hli.index===index){hli.value=value;return}hindex={v:index};hiv=this.getHardIndexValue(hindex);hiv==null?this.hardList.add(hiv=new(ExpressCraft.IndexValue$1(T))(index,value)):hiv.value=value;AddToSoftList&&this.softList.add(hindex.v)},remove:function(index,OnlySoftList){var i,Length,i1,sli,length,i2,hli;if(OnlySoftList===void 0&&(OnlySoftList=!1),this.hardLength>this.limit)if((this.hardLength-1|0)>this.limit)this.hardHardList.setItem(index,this.defaultValue);else{for(i=0;i<this.hardLength;i=i+1|0)i===index||Bridge.equals(this.hardHardList.getItem(i),this.defaultValue)||this.hardList.add(new(ExpressCraft.IndexValue$1(T))(i,this.hardHardList.getItem(i)));this.hardLength=this.hardLength-1|0}else{for(Length=this.softList.getCount(),i1=0;i1<Length;i1=i1+1|0)if(sli=this.softList.getItem(i1),this.hardList.getItem(sli).index===index){if(this.softList.removeAt(i1),OnlySoftList)return;this.hardList.removeAt(sli);return}for(length=this.hardList.getCount(),i2=0;i2<length;i2=i2+1|0)if(hli=this.hardList.getItem(i2),hli.index===index){this.hardList.removeAt(i2);return}}}}});Bridge.define("ExpressCraft.Helper",{statics:{toPx$2:function(i){return i+"px"},toPx$1:function(i){return i+"px"},toPx:function(i){return i+"px"},appendChildren:function(c,Nodes){if(Nodes===void 0&&(Nodes=[]),Nodes!=null&&Nodes.length>0)for(var i=0;i<Nodes.length;i=i+1|0)c.appendChild(Nodes[i])},appendChildren$1:function(c,Nodes){if(Nodes===void 0&&(Nodes=[]),Nodes!=null&&Nodes.length>0)for(var i=0;i<Nodes.length;i=i+1|0)c.appendChild(ExpressCraft.Control.op_Implicit(Nodes[i]))},setBounds$1:function(c,left,top,width,height){ExpressCraft.Helper.setBounds$3(c,ExpressCraft.Helper.toPx$1(left),ExpressCraft.Helper.toPx$1(top),ExpressCraft.Helper.toPx$1(width),ExpressCraft.Helper.toPx$1(height))},setBounds:function(c,left,top,width,height){ExpressCraft.Helper.setBounds$3(c,ExpressCraft.Helper.toPx(left),ExpressCraft.Helper.toPx(top),ExpressCraft.Helper.toPx(width),ExpressCraft.Helper.toPx(height))},setBounds$2:function(c,left,top,width,height){ExpressCraft.Helper.setBounds$3(c,ExpressCraft.Helper.toPx$2(left),ExpressCraft.Helper.toPx$2(top),ExpressCraft.Helper.toPx$2(width),ExpressCraft.Helper.toPx$2(height))},setBounds$4:function(c,left,top,width,height){ExpressCraft.Helper.setBounds$3(c.content,ExpressCraft.Helper.toPx$1(left),ExpressCraft.Helper.toPx$1(top),ExpressCraft.Helper.toPx$1(width),ExpressCraft.Helper.toPx$1(height))},setBounds$5:function(c,left,top,width,height){ExpressCraft.Helper.setBounds$3(c.content,left,top,width,height)},setBounds$3:function(c,left,top,width,height){c.style.left=left;c.style.top=top;c.style.width=width;c.style.height=height},setSize:function(c,width,height){ExpressCraft.Helper.setSize$1(c,ExpressCraft.Helper.toPx$1(width),ExpressCraft.Helper.toPx$1(height))},setSize$2:function(c,width,height){ExpressCraft.Helper.setSize$1(c.content,ExpressCraft.Helper.toPx$1(width),ExpressCraft.Helper.toPx$1(height))},setSize$3:function(c,width,height){ExpressCraft.Helper.setSize$1(c.content,width,height)},setSize$1:function(c,width,height){c.style.width=width;c.style.height=height},setBoundsFull:function(c){ExpressCraft.Helper.setBounds$3(c.content,"0","0","100%","100%")},setLocation$4:function(c,left,top){ExpressCraft.Helper.setLocation$3(c.content,ExpressCraft.Helper.toPx$1(left),ExpressCraft.Helper.toPx$1(top))},setLocation$5:function(c,left,top){ExpressCraft.Helper.setLocation$3(c.content,left,top)},setLocation:function(c,left,top){ExpressCraft.Helper.setLocation$3(c,ExpressCraft.Helper.toPx(left),ExpressCraft.Helper.toPx(top))},setLocation$2:function(c,left,top){ExpressCraft.Helper.setLocation$3(c,ExpressCraft.Helper.toPx$2(left),ExpressCraft.Helper.toPx$2(top))},setLocation$1:function(c,left,top){ExpressCraft.Helper.setLocation$3(c,ExpressCraft.Helper.toPx$1(left),ExpressCraft.Helper.toPx$1(top))},setLocation$3:function(c,left,top){c.style.left=left;c.style.top=top}}});Bridge.define("ExpressCraft.IndexValue$1",function(T){return{index:0,value:Bridge.getDefaultValue(T),ctor:function(index,value){this.$initialize();this.index=index;this.value=value}}});Bridge.define("ExpressCraft.Point",{$kind:"struct",statics:{getDefaultValue:function(){return new ExpressCraft.Point}},x:0,y:0,$ctor1:function(x,y){this.$initialize();this.x=x;this.y=y},ctor:function(){this.$initialize()},getHashCode:function(){return Bridge.addHash([1852403652,this.x,this.y])},equals:function(o){return Bridge.is(o,ExpressCraft.Point)?Bridge.equals(this.x,o.x)&&Bridge.equals(this.y,o.y):!1},$clone:function(to){var s=to||new ExpressCraft.Point;return s.x=this.x,s.y=this.y,s}});Bridge.define("ExpressCraft.Rectange",{$kind:"struct",statics:{setBounds:function(x,y,w,h,obj){x.v=parseInt(obj.css("left"));y.v=parseInt(obj.css("top"));w.v=parseInt(obj.css("width"));h.v=parseInt(obj.css("height"))},valueInRange:function(value,min,max){return value>=min&&value<=max},rectOverlap:function(A,B){var xOverlap=ExpressCraft.Rectange.valueInRange(A.x,B.x,B.x+B.width|0)||ExpressCraft.Rectange.valueInRange(B.x,A.x,A.x+A.width|0),yOverlap=ExpressCraft.Rectange.valueInRange(A.y,B.y,B.y+B.height|0)||ExpressCraft.Rectange.valueInRange(B.y,A.y,A.y+A.height|0);return xOverlap&&yOverlap},createFromHTMLElement:function(element){if(element==null)return new ExpressCraft.Rectange.ctor;var obj=$(element);return Bridge.merge(new ExpressCraft.Rectange.ctor,{x:parseInt(obj.css("left")),y:parseInt(obj.css("top")),width:parseInt(obj.css("width")),height:parseInt(obj.css("height"))})},getDefaultValue:function(){return new ExpressCraft.Rectange}},x:0,y:0,width:0,height:0,$ctor1:function(location,size){this.$initialize();this.x=location.x;this.y=location.y;this.width=size.width;this.height=size.height},$ctor2:function(x,y,width,height){this.$initialize();this.x=x;this.y=y;this.width=width;this.height=height},ctor:function(){this.$initialize()},getHashCode:function(){return Bridge.addHash([3653948339,this.x,this.y,this.width,this.height])},equals:function(o){return Bridge.is(o,ExpressCraft.Rectange)?Bridge.equals(this.x,o.x)&&Bridge.equals(this.y,o.y)&&Bridge.equals(this.width,o.width)&&Bridge.equals(this.height,o.height):!1},$clone:function(to){var s=to||new ExpressCraft.Rectange;return s.x=this.x,s.y=this.y,s.width=this.width,s.height=this.height,s}});Bridge.define("ExpressCraft.RibbonControl.RibbonType",{$kind:"enum",statics:{Full:0,Compact:1}});Bridge.define("ExpressCraft.RibbonGroup.RenderInfo",{left:0,width:0,isSmall:!1,firstButton:null,secondButton:null,thirdButton:null,beginGroup:!1});Bridge.define("ExpressCraft.Settings",{statics:{resourceURL:"./images/",renderControlsOnAdd:!0,defaultFont:"8.25pt Tahoma",defaultStyleSheet:null,pluginStyleSheet:null,gridViewAutoColumnGenerateFormatAsDate:!1,setup:function(){ExpressCraft.Settings.setupStyleDefaults()},setupStyleDefaults:function(){for(var ownerNode,sheets=document.styleSheets,i=0;i<sheets.length;i=i+1|0)(ownerNode=Bridge.as(sheets[i].ownerNode,HTMLLinkElement),ownerNode!=null)&&(Bridge.referenceEquals(ownerNode.id,"expresscraft")&&(ExpressCraft.Settings.defaultStyleSheet=sheets[i]),Bridge.referenceEquals(ownerNode.id,"expresscraftplugin")&&(ExpressCraft.Settings.pluginStyleSheet=sheets[i]));ExpressCraft.Settings.defaultStyleSheet!=null&&(ExpressCraft.Settings.defaultFont=ExpressCraft.Settings.getStyleRuleValue("font","*"))},getStyleRuleValue:function(style,className){var pStyles,i,rule,Styles,i1,rule1;if(ExpressCraft.Settings.pluginStyleSheet!=null&&(pStyles=ExpressCraft.Settings.pluginStyleSheet,pStyles.cssRules))for(i=0;i<pStyles.cssRules.length;i=i+1|0)if(rule=pStyles.cssRules[i],rule.selectorText&&!Bridge.referenceEquals(rule.selectorText.split(44).indexOf(className),-1))return rule.style[style];if(ExpressCraft.Settings.defaultStyleSheet==null||(Styles=ExpressCraft.Settings.defaultStyleSheet,!Styles.cssRules))return null;for(i1=0;i1<Styles.cssRules.length;i1=i1+1|0)if(rule1=Styles.cssRules[i1],rule1.selectorText&&!Bridge.referenceEquals(rule1.selectorText.split(44).indexOf(className),-1))return rule1.style[style];return null}}});Bridge.define("ExpressCraft.Size",{$kind:"struct",statics:{getDefaultValue:function(){return new ExpressCraft.Size}},width:0,height:0,$ctor1:function(width,height){this.$initialize();this.width=width;this.height=height},ctor:function(){this.$initialize()},getHashCode:function(){return Bridge.addHash([1702521171,this.width,this.height])},equals:function(o){return Bridge.is(o,ExpressCraft.Size)?Bridge.equals(this.width,o.width)&&Bridge.equals(this.height,o.height):!1},$clone:function(to){var s=to||new ExpressCraft.Size;return s.width=this.width,s.height=this.height,s}});Bridge.define("ExpressCraft.SortMode",{$kind:"enum",statics:{None:0,Asc:1,Desc:2}});Bridge.define("ExpressCraft.StyleController",{statics:{cSS_calc:"calc",setup:function(){Bridge.Browser.isChrome?Bridge.Browser.chromeVersion<26&&(ExpressCraft.StyleController.cSS_calc="-webkit-calc"):ExpressCraft.StyleController.isFireFox()?Bridge.Browser.firefoxVersion<16&&(ExpressCraft.StyleController.cSS_calc="-moz-calc"):Bridge.Browser.isSafari&&Bridge.Browser.safariVersion<7&&(ExpressCraft.StyleController.cSS_calc="-webkit-calc")},isFireFox:function(){return Bridge.Browser.isFF10||Bridge.Browser.isFF3_0||Bridge.Browser.isFF3_5||Bridge.Browser.isFF3_6||Bridge.Browser.isFF4||Bridge.Browser.isFF5},calc:function(percent,value,isPixels,roundPercent){return isPixels===void 0&&(isPixels=!0),roundPercent===void 0&&(roundPercent=!0),System.String.format("{0}({1}% - {2}{3})",ExpressCraft.StyleController.cSS_calc,roundPercent?Bridge.Math.round(percent,0,6):percent,value,isPixels?"px":"em")}}});Bridge.define("ExpressCraft.ComboBoxEdit",{inherits:[ExpressCraft.Control],comboBoxBase:null,previousSelectedIndex:-1,selectedIndexChanged:null,enabled:!0,_readonly:!1,ctor:function(){this.$initialize();ExpressCraft.Control.$ctor4.call(this,"inputcontrol",ExpressCraft.ComboBoxTypes.Default);this.comboBoxBase=Bridge.as(this.content,HTMLSelectElement);this.comboBoxBase.onchange=Bridge.fn.bind(this,$asm.$.ExpressCraft.ComboBoxEdit.f1)},getText:function(){return this.comboBoxBase.selectedIndex===-1?"":this.comboBoxBase.options[this.comboBoxBase.selectedIndex].innerHTML},setText:function(value){for(var i=0;i<this.comboBoxBase.options.length;i=i+1|0)Bridge.referenceEquals(this.comboBoxBase.options[i].innerHTML,value)&&(this.comboBoxBase.selectedIndex=i);this.comboBoxBase.selectedIndex=-1},getValue:function(){return this.comboBoxBase.selectedIndex===-1?"":this.comboBoxBase.options[this.comboBoxBase.selectedIndex].value},setValue:function(value){for(var i=0;i<this.comboBoxBase.options.length;i=i+1|0)Bridge.referenceEquals(this.comboBoxBase.options[i].value,value)&&(this.comboBoxBase.selectedIndex=i);this.comboBoxBase.selectedIndex=-1},getEnabled:function(){return this.enabled},setEnabled:function(value){this.enabled=value;this.content.setAttribute("disabled",System.Boolean.toString(!this.enabled))},getReadonly:function(){return this._readonly},setReadonly:function(value){this._readonly=value;this.content.setAttribute("readonly",System.Boolean.toString(this._readonly))},fillData:function(dataitems){if(dataitems===void 0&&(dataitems=[]),$(this.comboBoxBase).empty(),dataitems==null)for(var i=0;i<dataitems.length;i=i+1|0)this.comboBoxBase.appendChild(Bridge.merge(document.createElement("option"),{innerHTML:dataitems[i].text,value:dataitems[i].value}))},render:function(){ExpressCraft.Control.prototype.render.call(this)}});Bridge.ns("ExpressCraft.ComboBoxEdit",$asm.$);Bridge.apply($asm.$.ExpressCraft.ComboBoxEdit,{f1:function(ev){this.previousSelectedIndex!==this.comboBoxBase.selectedIndex&&(Bridge.staticEquals(this.selectedIndexChanged,null)||this.selectedIndexChanged(this),this.previousSelectedIndex=this.comboBoxBase.selectedIndex);ev.stopPropagation()}});Bridge.define("ExpressCraft.DataColumnDateTime",{inherits:[ExpressCraft.DataColumn],cells:null,config:{init:function(){this.cells=new(System.Collections.Generic.List$1(System.Nullable$1(Date)))}},ctor:function(){this.$initialize();ExpressCraft.DataColumn.ctor.call(this);this.dataType=ExpressCraft.DataType.DateTime}});Bridge.define("ExpressCraft.DataColumnDecimal",{inherits:[ExpressCraft.DataColumn],cells:null,config:{init:function(){this.cells=new(System.Collections.Generic.List$1(System.Nullable$1(System.Decimal)))}},ctor:function(){this.$initialize();ExpressCraft.DataColumn.ctor.call(this);this.dataType=ExpressCraft.DataType.Decimal}});Bridge.define("ExpressCraft.DataColumnDouble",{inherits:[ExpressCraft.DataColumn],cells:null,config:{init:function(){this.cells=new(System.Collections.Generic.List$1(System.Nullable$1(System.Double)))}},ctor:function(){this.$initialize();ExpressCraft.DataColumn.ctor.call(this);this.dataType=ExpressCraft.DataType.Double}});Bridge.define("ExpressCraft.DataColumnFloat",{inherits:[ExpressCraft.DataColumn],cells:null,config:{init:function(){this.cells=new(System.Collections.Generic.List$1(System.Nullable$1(System.Single)))}},ctor:function(){this.$initialize();ExpressCraft.DataColumn.ctor.call(this);this.dataType=ExpressCraft.DataType.Float}});Bridge.define("ExpressCraft.DataColumnInteger",{inherits:[ExpressCraft.DataColumn],cells:null,config:{init:function(){this.cells=new(System.Collections.Generic.List$1(System.Nullable$1(System.Int32)))}},ctor:function(){this.$initialize();ExpressCraft.DataColumn.ctor.call(this);this.dataType=ExpressCraft.DataType.Integer}});Bridge.define("ExpressCraft.DataColumnLong",{inherits:[ExpressCraft.DataColumn],cells:null,config:{init:function(){this.cells=new(System.Collections.Generic.List$1(System.Nullable$1(System.Int64)))}},ctor:function(){this.$initialize();ExpressCraft.DataColumn.ctor.call(this);this.dataType=ExpressCraft.DataType.Long}});Bridge.define("ExpressCraft.DataColumnObject",{inherits:[ExpressCraft.DataColumn],cells:null,config:{init:function(){this.cells=new(System.Collections.Generic.List$1(Object))}},ctor:function(){this.$initialize();ExpressCraft.DataColumn.ctor.call(this);this.dataType=ExpressCraft.DataType.Object}});Bridge.define("ExpressCraft.DataColumnString",{inherits:[ExpressCraft.DataColumn],cells:null,config:{init:function(){this.cells=new(System.Collections.Generic.List$1(String))}},ctor:function(){this.$initialize();ExpressCraft.DataColumn.ctor.call(this);this.dataType=ExpressCraft.DataType.String}});Bridge.define("ExpressCraft.Form",{inherits:[ExpressCraft.Control],statics:{movingForm:null,parent:null,formOverLay:null,formCollections:null,_ActiveForm:null,_PrevActiveForm:null,moveAction:1,windowHolderSelectionBoxX:0,windowHolderSelectionBoxY:0,windowHolderSelectionBoxXOff:0,windowHolderSelectionBoxYOff:0,toClean:null,config:{properties:{WindowHolder:null,ResizeCorners:2,Mouse_Down:!1,FadeLength:100,ShowBodyOverLay:!1,Window_DefaultHeight:480,Window_DefaultWidth:640},init:function(){this.formCollections=new(System.Collections.Generic.List$1(ExpressCraft.FormCollection));this.toClean=new(System.Collections.Generic.List$1(ExpressCraft.Form))}},getActiveForm:function(){return ExpressCraft.Form._ActiveForm},setActiveForm:function(value){Bridge.referenceEquals(ExpressCraft.Form._ActiveForm,value)||(ExpressCraft.Form._PrevActiveForm=ExpressCraft.Form._ActiveForm,ExpressCraft.Form._ActiveForm!=null&&ExpressCraft.Form._ActiveForm.content!=null&&(ExpressCraft.Form._ActiveForm.getBodyOverLay().style.visibility="visible"),ExpressCraft.Form._ActiveForm=value,ExpressCraft.Form._ActiveForm!=null&&ExpressCraft.Form._ActiveForm.content!=null&&(ExpressCraft.Form._ActiveForm.getBodyOverLay().style.visibility="collapse",ExpressCraft.Form._ActiveForm.bringToFront()))},midleOfAction:function(){return ExpressCraft.Form.movingForm!=null},getActiveFormCollection:function(){for(var frmCol,x,i=ExpressCraft.Form.formCollections.getCount()-1|0;i>=0;i=i-1|0)if(frmCol=ExpressCraft.Form.formCollections.getItem(i),frmCol.formOwner==null){for(x=0;x<frmCol.visibleForms.getCount();x=x+1|0)frmCol.visibleForms.getItem(x)!=null&&frmCol.visibleForms.getItem(x).close();ExpressCraft.Form.formCollections.removeAt(i)}else return frmCol;return null},setBodyOverLay:function(){var ActiveCollection=ExpressCraft.Form.getActiveFormCollection(),VisibleForms,i,form;if(ActiveCollection!=null)for(ActiveCollection.formOwner.showBodyOverLayStyle(),VisibleForms=ActiveCollection.visibleForms,i=0;i<VisibleForms.getCount();i=i+1|0)form=VisibleForms.getItem(i),form!=null&&form.showBodyOverLayStyle()},changeStateTextSelection:function(element,state){state?$(element).css("user-select","text"):$(element).css("user-select","none")},disableStateDrag:function(element){Bridge.is(element,HTMLImageElement)?element.ondragstart=$asm.$.ExpressCraft.Form.f1:$(element).css("user-drag:","none")},setup:function(parent){parent===void 0&&(parent=null);ExpressCraft.StyleController.setup();window.onresize=$asm.$.ExpressCraft.Form.f2;ExpressCraft.Form.parent=parent==null?document.body:parent;ExpressCraft.Form.setWindowHolder(ExpressCraft.Control.createDiv$1("form-container"));ExpressCraft.Form.formOverLay=ExpressCraft.Control.createDiv$1("system-form-collection-overlay");ExpressCraft.Form.formOverLay.onclick=$asm.$.ExpressCraft.Form.f3;ExpressCraft.Form.formOverLay.oncontextmenu=$asm.$.ExpressCraft.Form.f4;ExpressCraft.Form.formOverLay.style.visibility="visible";ExpressCraft.Form.getWindowHolder().appendChild(ExpressCraft.Form.formOverLay);var mouseMove=$asm.$.ExpressCraft.Form.f5;window.addEventListener("mouseup",$asm.$.ExpressCraft.Form.f6);window.addEventListener("mousemove",mouseMove);ExpressCraft.Form.parent.appendChild(ExpressCraft.Form.getWindowHolder())},calculateZOrder:function(){var zIndex,x,TopMostForms,VisibleForms,i,i1,i2,form,i3;if(ExpressCraft.Form.getActiveFormCollection(),ExpressCraft.Form.formCollections!=null)for(ExpressCraft.Form.formCollections.remove(null),zIndex={v:1},ExpressCraft.Form.formOverLay.style.opacity=ExpressCraft.Form.formCollections.getCount()===1?"0":"0.4",x=0;x<ExpressCraft.Form.formCollections.getCount();x=x+1|0){for(x===(ExpressCraft.Form.formCollections.getCount()-1|0)&&$(ExpressCraft.Form.formOverLay).css("zIndex",Bridge.identity(zIndex.v,zIndex.v=zIndex.v+1|0)),TopMostForms=new(System.Collections.Generic.List$1(ExpressCraft.Form)),VisibleForms=ExpressCraft.Form.formCollections.getItem(x).visibleForms,ExpressCraft.Form.formCollections.getItem(x).formOwner.setZIndex(zIndex),i=0;i<VisibleForms.getCount();i=i+1|0)VisibleForms.getItem(i).content==null?ExpressCraft.Form.toClean.add(VisibleForms.getItem(i)):VisibleForms.getItem(i).topMost&&TopMostForms.add(VisibleForms.getItem(i));for(i1=0;i1<ExpressCraft.Form.toClean.getCount();i1=i1+1|0)VisibleForms.contains(ExpressCraft.Form.toClean.getItem(i1))&&(VisibleForms.remove(ExpressCraft.Form.toClean.getItem(i1)),ExpressCraft.Form.toClean.setItem(i1,null));for(ExpressCraft.Form.toClean.remove(null),i2=0;i2<TopMostForms.getCount();i2=i2+1|0)form=TopMostForms.getItem(i2),VisibleForms.remove(form),VisibleForms.add(form);for(i3=0;i3<VisibleForms.getCount();i3=i3+1|0)VisibleForms.getItem(i3)!=null&&VisibleForms.getItem(i3).content!=null&&VisibleForms.getItem(i3).setZIndex(zIndex)}}},allowSizeChange:!0,allowMoveChange:!0,self:null,_IsDialog:!1,children:null,startPosition:2,topMost:!1,dialogResult:0,prev_px:0,prev_py:0,prev_width:0,prev_height:0,prev_top:0,prev_left:0,dialogResults:null,config:{properties:{Heading:null,ButtonClose:null,ButtonExpand:null,ButtonMinimize:null,HeadingTitle:null,Body:null,BodyOverLay:null,Owner:null,MinWidth:200,MinHeight:50,windowState:0},init:function(){this.children=new(System.Collections.Generic.List$1(ExpressCraft.Control));this.dialogResults=new(System.Collections.Generic.List$1(ExpressCraft.DialogResult))}},ctor:function(){this.$initialize();ExpressCraft.Control.$ctor1.call(this,"form-base");this.setHeading(ExpressCraft.Control.createDiv$1("form-heading"));this.getHeading().oncontextmenu=$asm.$.ExpressCraft.Form.f4;this.setHeadingTitle(ExpressCraft.Control.createSpan$1("form-heading-title"));this.setBody(ExpressCraft.Control.createDiv$1("form-body"));this.getBody().oncontextmenu=Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f7);this.setBackColor("#F0F0F0");this.setBodyOverLay(ExpressCraft.Control.createDiv$1("form-body-overlay"));this.getBodyOverLay().style.opacity=ExpressCraft.Form.getShowBodyOverLay()?"0.5":"0";this.setButtonClose(this.createFormButton(ExpressCraft.Form.FormButtonType.Close));this.setButtonExpand(this.createFormButton(ExpressCraft.Form.FormButtonType.Maximize));this.setButtonMinimize(this.createFormButton(ExpressCraft.Form.FormButtonType.Minimize));this.getBodyOverLay().style.visibility="collapse";this.self=$(this.content);this.content.addEventListener("mousedown",Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f8));this.getHeading().addEventListener("dblclick",Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f9));this.content.addEventListener("mousemove",Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f10));this.getHeading().addEventListener("mousedown",Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f11));this.getBody().addEventListener("mousedown",Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f12));this.getBody().addEventListener("mousemove",Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f13));this.getBodyOverLay().addEventListener("mousedown",Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f14));this.getBody().addEventListener("mouseleave",$asm.$.ExpressCraft.Form.f15);this.getBodyOverLay().addEventListener("mouseenter",Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f16));$(this.content).css("width",ExpressCraft.Form.getWindow_DefaultWidth()).css("height",ExpressCraft.Form.getWindow_DefaultHeight());this.content.appendChild(this.getHeading());this.content.appendChild(this.getBody());this.content.appendChild(this.getBodyOverLay());this.getHeading().appendChild(this.getHeadingTitle());this.getHeading().appendChild(this.getButtonClose());this.getHeading().appendChild(this.getButtonExpand());this.getHeading().appendChild(this.getButtonMinimize());this.initialise()},getHeight:function(){return this.content.style.height},setHeight:function(value){this.content.style.height=value},getWidth:function(){return this.content.style.width},setWidth:function(value){this.content.style.width=value},getLeft:function(){return this.content.style.left},setLeft:function(value){this.content.style.left=value},getTop:function(){return this.content.style.top},setTop:function(value){this.content.style.top=value},getText:function(){return this.getHeadingTitle().innerHTML},setText:function(value){this.getHeadingTitle().innerHTML=value},getBackColor:function(){return this.getBody().style.backgroundColor},setBackColor:function(value){this.getBody().style.backgroundColor=value},getForeColor:function(){return this.getBody().style.color},setForeColor:function(value){this.getBody().style.color=value},isDialog:function(){return this._IsDialog},linkchildToForm:function(child){child!=null&&this.children.add(child)},linkchildrenToForm:function(children){(children===void 0&&(children=[]),children!=null&&children.length!==0)&&this.children.addRange(children)},resizing:function(){if(!Bridge.staticEquals(this.onResize,null))this.onResize(this);this.onResizing();for(var i=0;i<this.children.getCount();i=i+1|0)if(this.children.getItem(i)!=null&&!Bridge.staticEquals(this.children.getItem(i).onResize,null))this.children.getItem(i).onResize(this.children.getItem(i))},onResizing:function(){},isContentVisible:function(){return this.content!=null&&this.content.style.visibility==="visible"},initialise:function(){},onShowing:function(){},onShowed:function(){},onClosing:function(){},onClosed:function(){},showBodyOverLayStyle:function(){this.getBodyOverLay()!=null&&this.getBodyOverLay().style.visibility==="collapse"&&(this.getBodyOverLay().style.visibility="visible")},setWindowState:function(State){this.allowSizeChange&&(this.setwindowState(State),this.getwindowState()===ExpressCraft.Form.WindowState.Normal?(this.setWidth(this.prev_width+"px"),this.setHeight(this.prev_height+"px"),this.setTop(this.prev_top+"px"),this.setLeft(this.prev_left+"px"),this.resizing()):this.getwindowState()===ExpressCraft.Form.WindowState.Maximized&&(this.prev_height=parseInt(this.getHeight()),this.prev_width=parseInt(this.getWidth()),this.prev_left=parseInt(this.getLeft()),this.prev_top=parseInt(this.getTop()),this.setWidth(ExpressCraft.StyleController.calc(100,5)),this.setHeight(ExpressCraft.StyleController.calc(100,5)),this.setTop("0"),this.setLeft("0"),this.resizing()))},changeWindowState:function(){this.getwindowState()===ExpressCraft.Form.WindowState.Maximized?this.setWindowState(ExpressCraft.Form.WindowState.Normal):this.setWindowState(ExpressCraft.Form.WindowState.Maximized)},createFormButton:function(Type){var butt=ExpressCraft.Control.createDiv$1("form-heading-button");switch(Type){case ExpressCraft.Form.FormButtonType.Close:butt.classList.add("form-heading-button-close");butt.style.left=ExpressCraft.StyleController.calc(100,45);butt.innerHTML="X";butt.onmousedown=Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f17);butt.onmouseup=Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f18);butt.onmouseenter=Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f19);butt.onmouseleave=$asm.$.ExpressCraft.Form.f20;break;case ExpressCraft.Form.FormButtonType.Maximize:butt.style.left=ExpressCraft.StyleController.calc(100,91);butt.innerHTML="&#9633;";butt.onmouseup=Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f21);break;case ExpressCraft.Form.FormButtonType.Minimize:butt.style.left=ExpressCraft.StyleController.calc(100,137);butt.innerHTML="-";butt.onmouseup=Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f22);break;case ExpressCraft.Form.FormButtonType.Restore:break;case ExpressCraft.Form.FormButtonType.Help:break;default:butt.onmouseup=$asm.$.ExpressCraft.Form.f23}return butt.onmousemove=$asm.$.ExpressCraft.Form.f24,Type!==ExpressCraft.Form.FormButtonType.Close&&(butt.onmousedown=Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f25)),butt},setCursor:function(cur){this.content.style.cursor=cur;this.getHeading().style.cursor=cur},titleBarHeight:function(){return this.getHeading().clientHeight},titleBarWidth:function(){return this.getHeading().clientWidth},clientX:function(){return this.getBody().clientLeft},clientY:function(){return this.getBody().clientTop},getFormCollectionFromForm:function(){for(var visibleForms,x,i=0;i<ExpressCraft.Form.formCollections.getCount();i=i+1|0){if(Bridge.referenceEquals(this,ExpressCraft.Form.formCollections.getItem(i).formOwner))return ExpressCraft.Form.formCollections.getItem(i);for(visibleForms=ExpressCraft.Form.formCollections.getItem(i).visibleForms,x=0;x<visibleForms.getCount();x=x+1|0)if(Bridge.referenceEquals(visibleForms.getItem(x),this))return ExpressCraft.Form.formCollections.getItem(i)}return null},isActiveFormCollection:function(){return Bridge.referenceEquals(this.getFormCollectionFromForm(this),ExpressCraft.Form.getActiveFormCollection())},isVisible:function(){return this.getFormCollectionFromForm(this)!=null},showStartNewLevel:function(owner){if(owner===void 0&&(owner=null),this.isVisible())throw new System.Exception("Invalid request to open form as a dialog that is already visible!");this.addFormToParentElement(owner);this.getBody().focus();ExpressCraft.Form.formCollections.add(new ExpressCraft.FormCollection(this));ExpressCraft.Form.calculateZOrder();this.onShowed();ExpressCraft.Form.setActiveForm(this)},showDialog:function(dialogResults){dialogResults===void 0&&(dialogResults=[]);this.getButtonMinimize()!=null&&this.getButtonMinimize().remove();this.getButtonExpand()!=null&&this.getButtonExpand().remove();this.getButtonClose()!=null&&this.getButtonClose().remove();dialogResults!=null&&dialogResults.length>0&&this.dialogResults.addRange(dialogResults);this.startPosition=ExpressCraft.Form.FormStartPosition.Center;this._IsDialog=!0;this.showStartNewLevel(null);this.centreForm();ExpressCraft.Form.setActiveForm(this)},centreForm:function(){this.getOwner()!=null&&this.self.css("left",(Bridge.Int.div(this.getOwner().clientWidth,2)|0)-(Bridge.Int.div(parseInt(this.getWidth()),2)|0)|0).css("top",(Bridge.Int.div(this.getOwner().clientHeight,2)|0)-(Bridge.Int.div(parseInt(this.getHeight()),2)|0)|0)},addFormToParentElement:function(owner){owner===void 0&&(owner=null);this.getHasRendered()||(this.render(),this.setHasRendered(!0));this.onShowing();owner==null?(ExpressCraft.Form.getWindowHolder().appendChild(this.content),owner=ExpressCraft.Form.getWindowHolder()):owner.appendChild(this.content);this.shown();this.setOwner(owner)},shown:function(){if(this.children!=null){for(var i=0;i<this.children.getCount();i=i+1|0)if(this.children.getItem(i)!=null&&!Bridge.staticEquals(this.children.getItem(i).onLoaded,null))this.children.getItem(i).onLoaded(this.children.getItem(i));this.children.remove(null)}},show:function(owner){var activeCollect,visbileForms;if(owner===void 0&&(owner=null),!this._IsDialog){if(ExpressCraft.Form.formCollections==null||ExpressCraft.Form.formCollections.getCount()===0){this.showStartNewLevel(owner);return}if(activeCollect=ExpressCraft.Form.getActiveFormCollection(),visbileForms=activeCollect.visibleForms,!visbileForms.contains(this)){if(this.addFormToParentElement(),this.content.style.visibility="visible",this.startPosition!==ExpressCraft.Form.FormStartPosition.Manual&&this.getwindowState()===ExpressCraft.Form.WindowState.Normal)if(this.startPosition===ExpressCraft.Form.FormStartPosition.Center||activeCollect==null||visbileForms==null||visbileForms.getCount()===0||visbileForms.getItem(visbileForms.getCount()-1|0).getwindowState()!==ExpressCraft.Form.WindowState.Normal||visbileForms.getItem(visbileForms.getCount()-1|0).content==null)this.centreForm();else if(this.startPosition===ExpressCraft.Form.FormStartPosition.WindowsDefaultLocation){var obj=visbileForms.getItem(visbileForms.getCount()-1|0),x=parseInt(obj.getLeft()),y=parseInt(obj.getTop()),pw25=this.getOwner().clientWidth*.15,ph25=this.getOwner().clientHeight*.15,pw75=this.getOwner().clientWidth*.55,ph75=this.getOwner().clientHeight*.55;x<pw25&&(x=Bridge.Int.clip32(pw25));y<ph25&&(y=Bridge.Int.clip32(ph25));x>pw75&&(x=Bridge.Int.clip32(pw25));y>ph75&&(y=Bridge.Int.clip32(ph25));x=x+10|0;y=y+10|0;this.self.css("left",x).css("top",y)}this.getBody().focus();visbileForms.add(this);ExpressCraft.Form.calculateZOrder();this.onShowed()}ExpressCraft.Form.setActiveForm(this)}},bringToFront:function(){var activeCollect=ExpressCraft.Form.getActiveFormCollection(),visibleForms;if(activeCollect!=null){if(Bridge.referenceEquals(activeCollect.formOwner,this))return;visibleForms=activeCollect.visibleForms;visibleForms!=null&&visibleForms.getCount()>1&&(visibleForms.remove(this),visibleForms.add(this));ExpressCraft.Form.calculateZOrder()}},setZIndex:function(zIndex){this.self.css("zIndex",Bridge.identity(zIndex.v,zIndex.v=zIndex.v+1|0))},close:function(){var ownerFormCollection,i,i1;if(this.onClosing(),ExpressCraft.Form.toClean.add(this),ownerFormCollection=this.getFormCollectionFromForm(this),ownerFormCollection!=null)if(Bridge.referenceEquals(ownerFormCollection.formOwner,this))for(ownerFormCollection.formOwner=null,i=0;i<ownerFormCollection.visibleForms.getCount();i=i+1|0)Bridge.referenceEquals(ownerFormCollection.visibleForms.getItem(i),this)||ownerFormCollection.visibleForms.getItem(i).close();else ownerFormCollection.visibleForms.remove(this);if(this.content!=null&&$(this.content).fadeOut(ExpressCraft.Form.getFadeLength(),Bridge.fn.bind(this,$asm.$.ExpressCraft.Form.f26)),ExpressCraft.Form.calculateZOrder(),ExpressCraft.Form.setActiveForm(ExpressCraft.Form._PrevActiveForm),this.dialogResult!==ExpressCraft.DialogResultEnum.None&&this.dialogResults!=null&&this.dialogResults.getCount()>0)for(i1=0;i1<this.dialogResults.getCount();i1=i1+1|0)this.dialogResults.getItem(i1).invokeIfResult(this.dialogResult);this.onClosed()},fillControlWithParent:function(element,widthOffset,heightOffset){widthOffset===void 0&&(widthOffset=8);heightOffset===void 0&&(heightOffset=9);element.style.position="absolute";element.style.width=ExpressCraft.StyleController.calc(100,widthOffset);element.style.height=ExpressCraft.StyleController.calc(100,heightOffset);element.style.top="1px";element.style.left="1px"},fillHorizontalControlWithParent:function(element,widthOffset){widthOffset===void 0&&(widthOffset=8);element.style.position="absolute";element.style.width=ExpressCraft.StyleController.calc(100,widthOffset);element.style.left="1px"},fillVerticalControlWithParent:function(element,heightOffset){heightOffset===void 0&&(heightOffset=9);element.style.position="absolute";element.style.height=ExpressCraft.StyleController.calc(100,heightOffset);element.style.top="1px"}});Bridge.ns("ExpressCraft.Form",$asm.$);Bridge.apply($asm.$.ExpressCraft.Form,{f1:function(ev){ev.preventDefault()},f2:function(){var i,fc,x;if(ExpressCraft.Form.formCollections!=null)for(i=0;i<ExpressCraft.Form.formCollections.getCount();i=i+1|0)if(ExpressCraft.Form.formCollections.getItem(i)!=null)for(fc=ExpressCraft.Form.formCollections.getItem(i),fc.formOwner!=null&&fc.formOwner.resizing(),x=0;x<fc.visibleForms.getCount();x=x+1|0)fc.visibleForms.getItem(x)!=null&&fc.visibleForms.getItem(x).resizing()},f3:function(){if(ExpressCraft.Form.getActiveForm()!=null){var form=ExpressCraft.Form.getActiveForm();form.getHeading().classList.add("form-heading-flash");Bridge.global.setTimeout(function(){form.getHeading().classList.remove("form-heading-flash")},800)}},f4:function(ev){ev.stopPropagation();ev.preventDefault()},f5:function(ev){var mev=ev,Y,X;if(ExpressCraft.Form.movingForm!=null){ev.preventDefault();ev.stopImmediatePropagation();ev.stopPropagation();ExpressCraft.Form.movingForm.getBodyOverLay().style.visibility==="collapse"&&(ExpressCraft.Form.movingForm.getBodyOverLay().style.visibility="visible",ExpressCraft.Form.movingForm.getHeading().focus());Y=mev.pageY+ExpressCraft.Form.movingForm.prev_py|0;X=mev.pageX+ExpressCraft.Form.movingForm.prev_px|0;ExpressCraft.Form.movingForm.getwindowState()===ExpressCraft.Form.WindowState.Maximized&&ExpressCraft.Form.moveAction===ExpressCraft.Form.MouseMoveAction.Move&&(ExpressCraft.Form.movingForm.changeWindowState(),X=mev.pageX-(Bridge.Int.div(ExpressCraft.Form.movingForm.prev_width,2)|0)|0,ExpressCraft.Form.movingForm.prev_px=X-mev.pageX|0);var obj=ExpressCraft.Form.movingForm.self,X1={},Y1={},W={},H={};Y<0&&(Y=1);X<0&&(X=1);switch(ExpressCraft.Form.moveAction){case ExpressCraft.Form.MouseMoveAction.Move:ExpressCraft.Helper.setLocation$1(ExpressCraft.Form.movingForm.content,X,Y);break;case ExpressCraft.Form.MouseMoveAction.TopLeftResize:ExpressCraft.Rectange.setBounds(X1,Y1,W,H,obj);W.v=W.v-(X-X1.v|0)|0;H.v=H.v-(Y-Y1.v|0)|0;W.v<ExpressCraft.Form.movingForm.getMinWidth()&&(X=X-(ExpressCraft.Form.movingForm.getMinWidth()-W.v|0)|0,W.v=ExpressCraft.Form.movingForm.getMinWidth());H.v<ExpressCraft.Form.movingForm.getMinHeight()&&(Y=Y-(ExpressCraft.Form.movingForm.getMinHeight()-H.v|0)|0,H.v=ExpressCraft.Form.movingForm.getMinHeight());ExpressCraft.Helper.setBounds$1(ExpressCraft.Form.movingForm.content,X,Y,W.v,H.v);ExpressCraft.Form.movingForm.resizing();break;case ExpressCraft.Form.MouseMoveAction.TopResize:Y1.v=parseInt(obj.css("top"));H.v=parseInt(obj.css("height"));H.v=H.v-(Y-Y1.v|0)|0;H.v<ExpressCraft.Form.movingForm.getMinHeight()&&(Y=Y-(ExpressCraft.Form.movingForm.getMinHeight()-H.v|0)|0,H.v=ExpressCraft.Form.movingForm.getMinHeight());obj.css("top",Y).css("height",H.v);ExpressCraft.Form.movingForm.resizing();break;case ExpressCraft.Form.MouseMoveAction.TopRightResize:ExpressCraft.Rectange.setBounds(X1,Y1,W,H,obj);H.v=H.v-(Y-Y1.v|0)|0;W.v=mev.pageX-X1.v|0;H.v<ExpressCraft.Form.movingForm.getMinHeight()&&(Y=Y-(ExpressCraft.Form.movingForm.getMinHeight()-H.v|0)|0,H.v=ExpressCraft.Form.movingForm.getMinHeight());W.v<ExpressCraft.Form.movingForm.getMinWidth()&&(W.v=ExpressCraft.Form.movingForm.getMinWidth());obj.css("top",Y).css("height",H.v).css("width",W.v);ExpressCraft.Form.movingForm.resizing();break;case ExpressCraft.Form.MouseMoveAction.LeftResize:X1.v=parseInt(obj.css("left"));W.v=parseInt(obj.css("width"));W.v=W.v-(X-X1.v|0)|0;W.v<ExpressCraft.Form.movingForm.getMinWidth()&&(X=X-(ExpressCraft.Form.movingForm.getMinWidth()-W.v|0)|0,W.v=ExpressCraft.Form.movingForm.getMinWidth());obj.css("left",X).css("width",W.v);ExpressCraft.Form.movingForm.resizing();break;case ExpressCraft.Form.MouseMoveAction.BottomLeftResize:ExpressCraft.Rectange.setBounds(X1,Y1,W,H,obj);W.v=W.v-(X-X1.v|0)|0;H.v=mev.pageY-Y1.v|0;W.v<ExpressCraft.Form.movingForm.getMinWidth()&&(X=X-(ExpressCraft.Form.movingForm.getMinWidth()-W.v|0)|0,W.v=ExpressCraft.Form.movingForm.getMinWidth());H.v<ExpressCraft.Form.movingForm.getMinHeight()&&(H.v=ExpressCraft.Form.movingForm.getMinHeight());obj.css("left",X).css("width",W.v).css("height",H.v);ExpressCraft.Form.movingForm.resizing();break;case ExpressCraft.Form.MouseMoveAction.BottomResize:Y1.v=parseInt(obj.css("top"));H.v=parseInt(obj.css("height"));H.v=mev.pageY-Y1.v|0;H.v<ExpressCraft.Form.movingForm.getMinHeight()&&(H.v=ExpressCraft.Form.movingForm.getMinHeight());obj.css("height",H.v);ExpressCraft.Form.movingForm.resizing();break;case ExpressCraft.Form.MouseMoveAction.RightResize:X1.v=parseInt(obj.css("left"));W.v=parseInt(obj.css("width"));W.v=mev.pageX-X1.v|0;W.v<ExpressCraft.Form.movingForm.getMinWidth()&&(W.v=ExpressCraft.Form.movingForm.getMinWidth());obj.css("width",W.v);ExpressCraft.Form.movingForm.resizing();break;case ExpressCraft.Form.MouseMoveAction.BottomRightResize:ExpressCraft.Rectange.setBounds(X1,Y1,W,H,obj);W.v=mev.pageX-X1.v|0;H.v=mev.pageY-Y1.v|0;H.v<ExpressCraft.Form.movingForm.getMinHeight()&&(H.v=ExpressCraft.Form.movingForm.getMinHeight());W.v<ExpressCraft.Form.movingForm.getMinWidth()&&(W.v=ExpressCraft.Form.movingForm.getMinWidth());obj.css("width",W.v).css("height",H.v);ExpressCraft.Form.movingForm.resizing()}}},f6:function(){ExpressCraft.Form.movingForm!=null&&(ExpressCraft.Form.movingForm.getBodyOverLay().style.visibility="collapse");ExpressCraft.Form.movingForm=null;ExpressCraft.Form.setMouse_Down(!1);ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.Move},f7:function(ev){Bridge.referenceEquals(ev.target,this.getBody())&&(ev.stopPropagation(),ev.preventDefault())},f8:function(ev){var mev;if(this.isActiveFormCollection()){mev=ev;mev.stopPropagation();ExpressCraft.Form.setMouse_Down(!0);ExpressCraft.Form.movingForm=this;ExpressCraft.Form.setActiveForm(this);ExpressCraft.Form.setBodyOverLay();this.prev_px=parseInt(this.self.css("left"))-mev.pageX|0;this.prev_py=parseInt(this.self.css("top"))-mev.pageY|0;var width=this.content.clientWidth,height=this.content.clientHeight,mouse=new ExpressCraft.Point.$ctor1(mev.pageX-this.content.offsetLeft|0,mev.pageY-this.content.offsetTop|0);this.getwindowState()===ExpressCraft.Form.WindowState.Maximized?(this.setCursor("default"),ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.Move):this.getHeadingTitle()!=null&&Bridge.referenceEquals(ev.target,this.getHeadingTitle())?(this.setCursor("default"),ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.Move):this.allowSizeChange&&(mouse.x<=ExpressCraft.Form.getResizeCorners()&&mouse.y<=ExpressCraft.Form.getResizeCorners()?(this.setCursor("nwse-resize"),ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.TopLeftResize):mouse.y<=ExpressCraft.Form.getResizeCorners()&&mouse.x>=(width-ExpressCraft.Form.getResizeCorners()|0)?(this.setCursor("nesw-resize"),ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.TopRightResize):mouse.y<=ExpressCraft.Form.getResizeCorners()?(this.setCursor("n-resize"),ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.TopResize):mouse.x<=ExpressCraft.Form.getResizeCorners()&&mouse.y>=(height-ExpressCraft.Form.getResizeCorners()|0)?(this.setCursor("nesw-resize"),ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.BottomLeftResize):mouse.y>=(height-ExpressCraft.Form.getResizeCorners()|0)&&mouse.x>=(width-ExpressCraft.Form.getResizeCorners()|0)?(this.setCursor("nwse-resize"),ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.BottomRightResize):mouse.y>=(height-ExpressCraft.Form.getResizeCorners()|0)?(this.setCursor("s-resize"),ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.BottomResize):mouse.x<=ExpressCraft.Form.getResizeCorners()?(this.setCursor("w-resize"),ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.LeftResize):mouse.x>=(width-ExpressCraft.Form.getResizeCorners()|0)?(this.setCursor("e-resize"),ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.RightResize):(this.setCursor("default"),ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.Move));this.allowMoveChange||ExpressCraft.Form.moveAction!==ExpressCraft.Form.MouseMoveAction.Move||(ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.None)}},f9:function(ev){this.allowSizeChange&&this.changeWindowState();ev.preventDefault();ev.stopPropagation()},f10:function(ev){if(!Bridge.referenceEquals(ev.target,this.getHeadingTitle())){var mev=ev,width=this.content.clientWidth,height=this.content.clientHeight,mouse=new ExpressCraft.Point.$ctor1(mev.pageX-this.content.offsetLeft|0,mev.pageY-this.content.offsetTop|0);if(ExpressCraft.Form.movingForm!=null&&ExpressCraft.Form.moveAction===ExpressCraft.Form.MouseMoveAction.Move){this.setCursor("default");return}if(this.getwindowState()===ExpressCraft.Form.WindowState.Maximized){this.setCursor("default");return}this.allowSizeChange?ExpressCraft.Form.moveAction===ExpressCraft.Form.MouseMoveAction.TopLeftResize||mouse.x<=ExpressCraft.Form.getResizeCorners()&&mouse.y<=ExpressCraft.Form.getResizeCorners()?this.setCursor("nwse-resize"):ExpressCraft.Form.moveAction===ExpressCraft.Form.MouseMoveAction.TopRightResize||mouse.y<=ExpressCraft.Form.getResizeCorners()&&mouse.x>=(width-ExpressCraft.Form.getResizeCorners()|0)?this.setCursor("nesw-resize"):mouse.y<=ExpressCraft.Form.getResizeCorners()||ExpressCraft.Form.moveAction===ExpressCraft.Form.MouseMoveAction.TopResize?this.setCursor("n-resize"):ExpressCraft.Form.moveAction===ExpressCraft.Form.MouseMoveAction.BottomLeftResize||mouse.x<=ExpressCraft.Form.getResizeCorners()&&mouse.y>=(height-ExpressCraft.Form.getResizeCorners()|0)?this.setCursor("nesw-resize"):ExpressCraft.Form.moveAction===ExpressCraft.Form.MouseMoveAction.BottomRightResize||mouse.y>=(height-ExpressCraft.Form.getResizeCorners()|0)&&mouse.x>=(width-ExpressCraft.Form.getResizeCorners()|0)?this.setCursor("nwse-resize"):ExpressCraft.Form.moveAction===ExpressCraft.Form.MouseMoveAction.BottomResize||mouse.y>=(height-ExpressCraft.Form.getResizeCorners()|0)?this.setCursor("s-resize"):ExpressCraft.Form.moveAction===ExpressCraft.Form.MouseMoveAction.LeftResize||mouse.x<=ExpressCraft.Form.getResizeCorners()?this.setCursor("w-resize"):ExpressCraft.Form.moveAction===ExpressCraft.Form.MouseMoveAction.RightResize||mouse.x>=(width-ExpressCraft.Form.getResizeCorners()|0)?this.setCursor("e-resize"):this.setCursor("default"):this.setCursor("default")}},f11:function(){(ExpressCraft.Form.setBodyOverLay(),this.isActiveFormCollection())&&(this.getwindowState()===ExpressCraft.Form.WindowState.Maximized?(ExpressCraft.Form.movingForm=this,this.setCursor("default"),ExpressCraft.Form.moveAction=ExpressCraft.Form.MouseMoveAction.Move):ExpressCraft.Form.movingForm=this,ExpressCraft.Form.setActiveForm(this))},f12:function(ev){this.isActiveFormCollection()&&(ExpressCraft.Form.setActiveForm(this),ExpressCraft.Form.movingForm=null,this.setCursor("default"),ev.stopPropagation())},f13:function(ev){if(ExpressCraft.Form.movingForm==null){if(!this.isActiveFormCollection())return;this.setCursor("default");ev.stopPropagation()}},f14:function(){this.isActiveFormCollection()&&(this.getBodyOverLay().style.visibility="collapse",ExpressCraft.Form.setActiveForm(this))},f15:function(){ExpressCraft.Form.movingForm==null&&ExpressCraft.Form.setBodyOverLay()},f16:function(){this.getBodyOverLay().style.visibility=ExpressCraft.Form.movingForm==null&&this.isActiveFormCollection()?"collapse":"visible"},f17:function(ev){ExpressCraft.Form.movingForm==null&&(ExpressCraft.Form.setMouse_Down(!0),ev.stopPropagation(),ev.preventDefault(),ExpressCraft.Form.setActiveForm(this))},f18:function(ev){ExpressCraft.Form.movingForm==null&&(ev.stopPropagation(),ev.preventDefault(),this.close())},f19:function(){ExpressCraft.Form.movingForm==null&&this.setCursor("default")},f20:function(){ExpressCraft.Form.movingForm!=null},f21:function(ev){ExpressCraft.Form.movingForm==null&&(ev.stopPropagation(),ev.preventDefault(),ExpressCraft.Form.setMouse_Down(!1),this.changeWindowState())},f22:function(ev){ExpressCraft.Form.movingForm==null&&(ev.stopPropagation(),ev.preventDefault(),ExpressCraft.Form.setMouse_Down(!1),this.setwindowState(ExpressCraft.Form.WindowState.Minimized))},f23:function(ev){ExpressCraft.Form.movingForm==null&&(ev.stopPropagation(),ev.preventDefault(),ExpressCraft.Form.setMouse_Down(!1))},f24:function(ev){ExpressCraft.Form.movingForm==null&&(ev.stopImmediatePropagation(),ev.preventDefault())},f25:function(ev){ExpressCraft.Form.movingForm==null&&(ExpressCraft.Form.setMouse_Down(!0),ev.stopPropagation(),ev.preventDefault(),ExpressCraft.Form.setActiveForm(this))},f26:function(){$(this.content).empty();this.content.remove();this.content=null}});Bridge.define("ExpressCraft.GridView",{inherits:[ExpressCraft.Control],statics:{SortDownBase64:"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",SortUpBase64:"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",UnitHeight:28},gridHeader:null,gridHeaderContainer:null,gridBody:null,gridBodyRows:null,_dataSource:null,onRowSizeChanged:null,onColumnSizeChanged:null,bottonOfTable:null,rightOfTable:null,rightOfTableHeader:null,selectedRows:null,autoGenerateColumnsFromSource:!0,allowMultiSelection:!0,_columnAutoWidth:!1,onRowClick:null,visibleRowHandles:null,columns:null,config:{init:function(){this.selectedRows=new(ExpressCraft.HardSoftList$1(Boolean))(!1);this.columns=new(System.Collections.Generic.List$1(ExpressCraft.GridViewColumn))}},ctor:function(autoGenerateColumns,columnAutoWidth){autoGenerateColumns===void 0&&(autoGenerateColumns=!0);columnAutoWidth===void 0&&(columnAutoWidth=!1);this.$initialize();ExpressCraft.Control.$ctor1.call(this,"grid");this.gridHeaderContainer=ExpressCraft.Control.createDiv$1("heading-container");ExpressCraft.Helper.setBounds$3(this.gridHeaderContainer,"0","0","100%","29px");this.gridHeader=ExpressCraft.Control.createDiv();ExpressCraft.Helper.setBounds$3(this.gridHeader,"0","0","0","29px");this.gridBody=ExpressCraft.Control.createDiv();ExpressCraft.Helper.setBounds$3(this.gridBody,"1px","31px","calc(100% - 2px)","calc(100% - 31px)");this.gridBody.style.overflowX="auto";this.gridBody.style.overflowY="auto";this.gridHeaderContainer.style.overflow="hidden";this.gridBodyRows=ExpressCraft.Control.createDiv();ExpressCraft.Helper.setBounds$3(this.gridBodyRows,"0","0","0","0");this.gridBody.appendChild(this.gridBodyRows);this.gridHeaderContainer.appendChild(this.gridHeader);this.onRowSizeChanged=Bridge.fn.bind(this,$asm.$.ExpressCraft.GridView.f1);this.onColumnSizeChanged=Bridge.fn.bind(this,$asm.$.ExpressCraft.GridView.f2);this.onResize=Bridge.fn.bind(this,$asm.$.ExpressCraft.GridView.f3);this.gridBody.onscroll=Bridge.fn.bind(this,$asm.$.ExpressCraft.GridView.f3);this.onLoaded=Bridge.fn.bind(this,$asm.$.ExpressCraft.GridView.f3);this.onRowClick=Bridge.fn.bind(this,$asm.$.ExpressCraft.GridView.f4);this.content.tabIndex=0;this.content.onkeydown=Bridge.fn.bind(this,$asm.$.ExpressCraft.GridView.f5);ExpressCraft.Helper.appendChildren(this.content,[this.gridHeaderContainer,this.gridBody]);this.autoGenerateColumnsFromSource=autoGenerateColumns;this.setColumnAutoWidth(columnAutoWidth)},getColumnAutoWidth:function(){return this._columnAutoWidth},setColumnAutoWidth:function(value){this.gridBody.style.overflowX=value?"hidden":"auto";this._columnAutoWidth!==value&&(this._columnAutoWidth=value,this.renderGrid())},getDataSource:function(){return this._dataSource},setDataSource:function(value){var i,gvc;if(this._dataSource=value,this._dataSource!=null){if(this.columns.getCount()===0&&this.autoGenerateColumnsFromSource)for(i=0;i<this._dataSource.getColumnCount();i=i+1|0){gvc=Bridge.merge(new ExpressCraft.GridViewColumn(this),{caption:this._dataSource.columns.getItem(i).fieldName,column:this._dataSource.columns.getItem(i),visible:!0});switch(this._dataSource.columns.getItem(i).dataType){case ExpressCraft.DataType.Integer:case ExpressCraft.DataType.Long:case ExpressCraft.DataType.Float:case ExpressCraft.DataType.Double:case ExpressCraft.DataType.Decimal:gvc.bodyApparence.alignment="right";break;case ExpressCraft.DataType.DateTime:ExpressCraft.Settings.gridViewAutoColumnGenerateFormatAsDate&&(gvc.formatString="{0:d}")}this.columns.add(gvc)}this.renderGrid()}},setVisibleRowHandles:function(T,Cells,asc){var sorted,sorted1;asc?(sorted=System.Linq.Enumerable.from(Cells).select(function(x,i){return new(System.Collections.Generic.KeyValuePair$2(T,System.Int32))(x,i)}).orderBy($asm.$.ExpressCraft.GridView.f6).toList(System.Collections.Generic.KeyValuePair$2(T,System.Int32)),this.visibleRowHandles=System.Linq.Enumerable.from(sorted).select($asm.$.ExpressCraft.GridView.f7).toList(System.Int32)):(sorted1=System.Linq.Enumerable.from(Cells).select(function(x,i){return new(System.Collections.Generic.KeyValuePair$2(T,System.Int32))(x,i)}).orderByDescending($asm.$.ExpressCraft.GridView.f6).toList(System.Collections.Generic.KeyValuePair$2(T,System.Int32)),this.visibleRowHandles=System.Linq.Enumerable.from(sorted1).select($asm.$.ExpressCraft.GridView.f7).toList(System.Int32))},sortColumn:function(column,sort){if(sort===void 0&&(sort=1),column.sortedMode=sort,sort===ExpressCraft.SortMode.None)this.visibleRowHandles=null;else{var sort1=sort===ExpressCraft.SortMode.Asc;switch(column.column.dataType){default:case ExpressCraft.DataType.Object:this.setVisibleRowHandles(Object,Bridge.as(column.column,ExpressCraft.DataColumnObject).cells,sort1);break;case ExpressCraft.DataType.DateTime:this.setVisibleRowHandles(System.Nullable$1(Date),Bridge.as(column.column,ExpressCraft.DataColumnDateTime).cells,sort1);break;case ExpressCraft.DataType.String:this.setVisibleRowHandles(String,Bridge.as(column.column,ExpressCraft.DataColumnString).cells,sort1);break;case ExpressCraft.DataType.Integer:this.setVisibleRowHandles(System.Nullable$1(System.Int32),Bridge.as(column.column,ExpressCraft.DataColumnInteger).cells,sort1);break;case ExpressCraft.DataType.Long:this.setVisibleRowHandles(System.Nullable$1(System.Int64),Bridge.as(column.column,ExpressCraft.DataColumnLong).cells,sort1);break;case ExpressCraft.DataType.Float:this.setVisibleRowHandles(System.Nullable$1(System.Single),Bridge.as(column.column,ExpressCraft.DataColumnFloat).cells,sort1);break;case ExpressCraft.DataType.Double:this.setVisibleRowHandles(System.Nullable$1(System.Double),Bridge.as(column.column,ExpressCraft.DataColumnDouble).cells,sort1);break;case ExpressCraft.DataType.Decimal:this.setVisibleRowHandles(System.Nullable$1(System.Decimal),Bridge.as(column.column,ExpressCraft.DataColumnDecimal).cells,sort1)}}this.renderGrid()},columnCount:function(){return this.columns.getCount()},rowCount:function(){return this._dataSource==null?0:this._dataSource.getRowCount()},scrollToBottom:function(){this.gridBody.scrollTop=this.gridBodyRows.clientHeight-this.gridBody.clientHeight|0},scrollToTop:function(){this.gridBody.scrollTop=0},getColumn:function(i){return this.columns.getItem(i)},getColumnByFieldName:function(fieldName,IgnoreCase){if(IgnoreCase===void 0&&(IgnoreCase=!1),this.getDataSource()==null)return null;for(var i=0;i<this.getDataSource().getColumnCount();i=i+1|0)if(this.getDataSource().columns.getItem(i)!=null&&System.String.compare(this.getDataSource().columns.getItem(i).fieldName,fieldName,IgnoreCase)===0)return this.getDataSource().columns.getItem(i);return null},addColumn$2:function(caption,fieldname,width,formatstring,alignment,forecolor,isBold){width===void 0&&(width=100);formatstring===void 0&&(formatstring="");alignment===void 0&&(alignment=3);forecolor===void 0&&(forecolor=null);isBold===void 0&&(isBold=!1);var col=this.getColumnByFieldName(fieldname);col!=null&&this.addColumn$1(caption,col,width,formatstring,alignment,forecolor,isBold)},addColumn$1:function(caption,column,width,formatstring,alignment,forecolor,isBold){width===void 0&&(width=100);formatstring===void 0&&(formatstring="");alignment===void 0&&(alignment=3);forecolor===void 0&&(forecolor=null);isBold===void 0&&(isBold=!1);this.addColumn(Bridge.merge(new ExpressCraft.GridViewColumn(this,width),{caption:caption,bodyApparence:new ExpressCraft.CellApparence.$ctor3(isBold,alignment,forecolor),formatString:formatstring,column:column}))},addColumn:function(column){column!=null&&(this.columns.add(column),this.renderGrid())},addColumns:function(columns){(columns===void 0&&(columns=[]),columns!=null&&columns.length!==0)&&(this.columns.addRange(columns),this.renderGrid())},removeColumn:function(column){this.columns.remove(column);this.renderGrid()},getDataSourceRow:function(i){return this.visibleRowHandles==null?i:this.visibleRowHandles.getItem(i)},getColumnWidths:function(){var width,i;if(this._columnAutoWidth)return this.gridBody.clientWidth;for(width=0,i=0;i<this.columns.getCount();i=i+1|0)width+=this.columns.getItem(i).getWidth();return width},selectAllRows:function(){var length=this.rowCount(),index,i;if(length===0)this.selectedRows.clearAll();else{for(index=System.Array.init(length,0),i=0;i<length;i=i+1|0)index[i]=this.getDataSourceRow(i);this.selectedRows.clearAllSetHardRange(!0,index)}this.renderGrid()},render:function(){ExpressCraft.Control.prototype.render.call(this);this.setHasRendered(!0);this.renderGrid()},getRawVisibleRowCount:function(){return this.gridBody.clientHeight===0?0:this.gridBody.clientHeight/ExpressCraft.GridView.UnitHeight},getRawTopRowIndex:function(){return this.gridBody.scrollTop===0?0:this.gridBody.scrollTop/ExpressCraft.GridView.UnitHeight},validateGridWidth:function(){var width=this.getColumnWidths();this.gridBodyRows.style.width=ExpressCraft.Helper.toPx$2(width);this.gridHeader.style.width=ExpressCraft.Helper.toPx$2(width+24);this.rightOfTable==null&&(this.rightOfTable=ExpressCraft.Control.createDiv(),this.gridBodyRows.appendChild(this.rightOfTable));this.rightOfTableHeader==null&&(this.rightOfTableHeader=ExpressCraft.Control.createDiv(),this.gridHeader.appendChild(this.rightOfTableHeader));ExpressCraft.Helper.setBounds$2(this.rightOfTable,width-1,0,1,1);ExpressCraft.Helper.setBounds$2(this.rightOfTableHeader,width-1,0,1,1)},validateGridHeight:function(){var i=this.rowCount();this.gridBodyRows.style.height=ExpressCraft.Helper.toPx$2(i*ExpressCraft.GridView.UnitHeight);this.bottonOfTable==null&&(this.bottonOfTable=ExpressCraft.Control.createDiv(),this.gridBodyRows.appendChild(this.bottonOfTable));ExpressCraft.Helper.setBounds$2(this.bottonOfTable,0,i*ExpressCraft.GridView.UnitHeight-1,1,1)},validateGridSize:function(){this.validateGridHeight();this.validateGridWidth()},clearHeader:function(){for(var i=this.gridHeader.children.length-1|0;i>=0;i=i-1|0)this.gridHeader.children[i]==null||Bridge.referenceEquals(this.gridHeader.children[i],this.rightOfTableHeader)||this.gridHeader.children[i].remove()},clearBody:function(){for(var i=this.gridBodyRows.children.length-1|0;i>=0;i=i-1|0)this.gridBodyRows.children[i]==null||Bridge.referenceEquals(this.gridBodyRows.children[i],this.rightOfTable)||Bridge.referenceEquals(this.gridBodyRows.children[i],this.bottonOfTable)||this.gridBodyRows.children[i].remove()},clearGrid:function(){this.clearHeader();this.clearBody()},renderGrid:function(){var x,uboundRowCount,x1,x2,Found,i,DataRowhandle,Rows,i1,x3,apparence1,cell;if(this.gridHeaderContainer.scrollLeft=this.gridBody.scrollLeft,this.validateGridSize(),this.columnCount()===0){this.clearGrid();return}var RawLeftCellIndex=0,RawLeftCellScrollPadding=0,RawLeftCellCount=this.columns.getCount(),LeftLocation=0,foundLeftLocation=!1,foundRightLocation=!1,ClientWidth=this.gridBody.clientWidth,ViewWidth=this.gridBody.scrollLeft+ClientWidth|0,_columnAutoWidthSingle=0;for(this._columnAutoWidth&&(_columnAutoWidthSingle=ClientWidth===0?0:Bridge.Int.div(ClientWidth,this.columns.getCount())|0),x=0;x<this.columns.getCount();x=x+1|0)if(this.columns.getItem(x).cachedX=LeftLocation,LeftLocation+=this._columnAutoWidth?_columnAutoWidthSingle:this.columns.getItem(x).getWidth(),!foundLeftLocation&&LeftLocation>=this.gridBody.scrollLeft&&(foundLeftLocation=!0,RawLeftCellIndex=x,RawLeftCellScrollPadding=LeftLocation-this.gridBody.scrollLeft),foundLeftLocation&&!foundRightLocation&&LeftLocation>=ViewWidth){foundRightLocation=!0;RawLeftCellCount=x+1|0;break}for(this.clearHeader(),uboundRowCount=RawLeftCellCount-1|0,x1=RawLeftCellIndex;x1<RawLeftCellCount;x1=x1+1|0)(function(){var gcol=this.columns.getItem(x1),apparence=gcol.headingApparence,col=ExpressCraft.Control.createLabel$2(gcol.caption,(this._columnAutoWidth?gcol.cachedX:gcol.cachedX)+1,0,(this._columnAutoWidth?_columnAutoWidthSingle:gcol.getWidth())-(x1===uboundRowCount?0:1),apparence.isBold,!1,"heading",apparence.alignment,apparence.forecolor),sortImage;gcol.sortedMode!==ExpressCraft.SortMode.None&&(sortImage=ExpressCraft.Control.createDiv(),ExpressCraft.Helper.setBounds$3(sortImage,"calc(100% - 13px)","11px","9px","5px"),sortImage.style.background=ExpressCraft.Control.getImageString(gcol.sortedMode===ExpressCraft.SortMode.Asc?ExpressCraft.GridView.SortUpBase64:ExpressCraft.GridView.SortDownBase64),col.appendChild(sortImage));col.onclick=Bridge.fn.bind(this,function(){for(var i=0;i<this.columnCount();i=i+1|0)Bridge.referenceEquals(this.columns.getItem(i),gcol)||(this.columns.getItem(i).sortedMode=ExpressCraft.SortMode.None);switch(gcol.sortedMode){default:case ExpressCraft.SortMode.None:this.sortColumn(gcol,ExpressCraft.SortMode.Asc);break;case ExpressCraft.SortMode.Asc:this.sortColumn(gcol,ExpressCraft.SortMode.Desc);break;case ExpressCraft.SortMode.Desc:this.sortColumn(gcol,ExpressCraft.SortMode.None)}});this.gridHeader.appendChild(col)}).call(this);if(this._dataSource==null||this._dataSource.getRowCount()===0||this._dataSource.getColumnCount()===0){this.clearBody();return}var RawTopRowIndex=this.getRawTopRowIndex(),RawTopRowScrollPadding=RawTopRowIndex%1,RawVisibleRowCount=this.getRawVisibleRowCount(),Length=Bridge.Int.clip32(RawVisibleRowCount+RawTopRowIndex)+1|0,start=Bridge.Int.clip32(RawTopRowIndex);for(x2=this.selectedRows.softList.getCount()-1|0;x2>=0;x2=x2-1|0){for(Found=!1,i=start;i<Length;i=i+1|0)if(i<this.getDataSource().getRowCount()&&(DataRowhandle=this.getDataSourceRow(i),this.selectedRows.getIndexValueByHardListIndex(this.selectedRows.softList.getItem(x2)).index===DataRowhandle)){Found=!0;break}Found||this.selectedRows.softList.removeAt(x2)}for(Rows=new(System.Collections.Generic.List$1(HTMLDivElement)),i1=start;i1<Length;i1=i1+1|0)if(i1<this.getDataSource().getRowCount()){var DataRowhandle1=this.getDataSourceRow(i1),Y=i1*ExpressCraft.GridView.UnitHeight-RawTopRowScrollPadding,classname=System.String.concat(i1%2==0?"cellrow even":"cellrow",this.selectedRows.getValue(DataRowhandle1,!0)?" cellrow-selected":""),dr=ExpressCraft.Control.createDiv$1(classname),Last=this.columns.getItem(RawLeftCellCount-1|0);for(ExpressCraft.Helper.setBounds$2(dr,0,Y,this._columnAutoWidth?ClientWidth:Last.cachedX+Last.getWidth(),ExpressCraft.GridView.UnitHeight),dr.setAttribute("i",System.Convert.toString(this.getDataSourceRow(i1))),dr.onclick=this.onRowClick,x3=RawLeftCellIndex;x3<RawLeftCellCount;x3=x3+1|0)apparence1=this.columns.getItem(x3).bodyApparence,cell=ExpressCraft.Control.createLabel$2(this.columns.getItem(x3).getDisplayValueByDataRowHandle(DataRowhandle1),this.columns.getItem(x3).cachedX,0,this._columnAutoWidth?_columnAutoWidthSingle:this.columns.getItem(x3).getWidth(),apparence1.isBold,!1,"cell",apparence1.alignment,apparence1.forecolor),dr.appendChild(cell);Rows.add(dr)}this.clearBody();Rows.getCount()>0&&$(this.gridBodyRows).append(Rows.toArray())}});Bridge.ns("ExpressCraft.GridView",$asm.$);Bridge.apply($asm.$.ExpressCraft.GridView,{f1:function(){this.validateGridHeight()},f2:function(){this.validateGridWidth()},f3:function(){this.renderGrid()},f4:function(ev){var mev=ev;if(this.allowMultiSelection){if(mev.ctrlKey){this.selectedRows.addOrSet(!0,parseInt(ev.currentTarget.getAttribute("i")),!0);this.renderGrid();return}if(mev.shiftKey)return}this.selectedRows.clearAndAddOrSet(!0,parseInt(ev.currentTarget.getAttribute("i")),!0);this.renderGrid()},f5:function(ev){var kev=ev;this.allowMultiSelection&&kev.ctrlKey&&(kev.keyCode===65||kev.keyCode===97)&&this.selectAllRows()},f6:function(x){return x.key},f7:function(x){return x.value}});Bridge.define("ExpressCraft.RibbonButton",{inherits:[ExpressCraft.Control],_icon:"",_iconURL:"",_caption:"",beginGroup:!1,isSmallCaption:!1,itemClick:null,enabled:!0,captionDiv:null,imageDiv:null,ctor:function(_caption,_isSmallCaption){_caption===void 0&&(_caption="");_isSmallCaption===void 0&&(_isSmallCaption=!1);this.$initialize();ExpressCraft.Control.$ctor1.call(this,_isSmallCaption?"ribbonbuttonsmall":"ribbonbutton");this.setCaption(_caption);this.isSmallCaption=_isSmallCaption},getIcon:function(){return this._icon},setIcon:function(value){Bridge.referenceEquals(this._icon,value)||(this._icon=value,this.processImage())},getIconURL:function(){return this._iconURL},setIconURL:function(value){Bridge.referenceEquals(this._iconURL,value)||(this._iconURL=value,this.processImage())},getCaption:function(){return this._caption},setCaption:function(value){Bridge.referenceEquals(this._caption,value)||(this._caption=value,this.processCaption())},getEnabled:function(){return this.enabled},setEnabled:function(value){this.enabled=value;this.setEnabled$1(value)},setEnabled$1:function(value){this.changeState(value);value?(this.imageDiv!=null&&this.imageDiv.classList.remove("disabled"),this.captionDiv!=null&&this.captionDiv.classList.remove("disabled")):(this.imageDiv!=null&&this.imageDiv.classList.add("disabled"),this.captionDiv!=null&&this.captionDiv.classList.add("disabled"))},render:function(){this.setHasRendered(!0);this.content.onclick=Bridge.fn.bind(this,$asm.$.ExpressCraft.RibbonButton.f1);this.processCaption();this.processImage();this.setEnabled$1(this.enabled)},processCaption:function(){System.String.isNullOrWhiteSpace(this.getCaption())?this.captionDiv!=null&&this.captionDiv.remove():(this.captionDiv=ExpressCraft.Control.createDiv$1(this.isSmallCaption?"ribbonbuttonsmallcaption":"ribbonbuttoncaption"),this.captionDiv.innerHTML=this.getCaption(),this.content.appendChild(this.captionDiv))},processImage:function(){this.imageDiv==null?System.String.isNullOrWhiteSpace(this.getIcon())?System.String.isNullOrWhiteSpace(this.getIconURL())||(this.imageDiv=ExpressCraft.Control.createDiv$1(this.isSmallCaption?"ribbonbuttonsmallicon":"ribbonbuttonicon"),this.imageDiv.style.background=ExpressCraft.Control.getImageStringURI(this.getIconURL()),this.content.appendChild(this.imageDiv)):(this.imageDiv=ExpressCraft.Control.createDiv$1(this.isSmallCaption?"ribbonbuttonsmallicon":"ribbonbuttonicon"),this.imageDiv.style.background=ExpressCraft.Control.getImageString(this.getIcon()),this.content.appendChild(this.imageDiv)):System.String.isNullOrWhiteSpace(this.getIcon())?System.String.isNullOrWhiteSpace(this.getIconURL())||(this.imageDiv.style.background=ExpressCraft.Control.getImageStringURI(this.getIconURL())):this.imageDiv.style.background=ExpressCraft.Control.getImageString(this.getIcon());this.imageDiv!=null?(this.imageDiv.style.backgroundSize="100% 100%",this.captionDiv!=null&&this.isSmallCaption&&(this.captionDiv.style.left="28px")):this.captionDiv!=null&&this.isSmallCaption&&(this.captionDiv.style.left="6px")}});Bridge.ns("ExpressCraft.RibbonButton",$asm.$);Bridge.apply($asm.$.ExpressCraft.RibbonButton,{f1:function(ev){this.enabled&&!Bridge.staticEquals(this.itemClick,null)&&this.itemClick(this);ev.stopPropagation()}});Bridge.define("ExpressCraft.RibbonControl",{inherits:[ExpressCraft.Control],iconURL:"fav.ico",type:0,selectedindex:0,config:{properties:{RibbonPages:null},init:function(){this.RibbonPages=new(System.Collections.Generic.List$1(ExpressCraft.RibbonPage))}},ctor:function(type){type===void 0&&(type=0);this.$initialize();ExpressCraft.Control.$ctor1.call(this,System.String.concat("ribboncontrol",type===ExpressCraft.RibbonControl.RibbonType.Full?"":" ribboncontrol-compact"));this.type=type;this.content.oncontextmenu=$asm.$.ExpressCraft.RibbonControl.f1},getSelectedIndex:function(){return this.selectedindex},setSelectedIndex:function(value){value<0&&(value=0);this.selectedindex=value;this.setSelectedIndex$1(value)},addRibbonPages:function(pages){pages===void 0&&(pages=[]);pages!=null&&this.getRibbonPages().addRange(pages)},setSelectedIndex$1:function(index){if(this.getRibbonPages()!=null&&this.getRibbonPages().getCount()>0)for(var i=0;i<this.getRibbonPages().getCount();i=i+1|0)this.getRibbonPages().getItem(i).ribbonHeader!=null&&(this.getRibbonPages().getItem(i).ribbonHeader.classList.remove("ribbonpageheader-hidden"),this.getRibbonPages().getItem(i).ribbonHeader.classList.remove("ribbonpageheader-active"),i===index?(this.getRibbonPages().getItem(i).ribbonHeader.classList.add("ribbonpageheader-active"),this.getRibbonPages().getItem(i).content.style.visibility="visible"):(this.getRibbonPages().getItem(i).ribbonHeader.classList.add("ribbonpageheader-hidden"),this.getRibbonPages().getItem(i).content.style.visibility="hidden"))},render:function(){var applicationIcon,appIconImage,width,i;if(this.setHasRendered(!0),this.type===ExpressCraft.RibbonControl.RibbonType.Full&&(applicationIcon=ExpressCraft.Control.createDiv$1("application-icon"),appIconImage=ExpressCraft.Control.createDiv$1("fav-icon"),appIconImage.style.background=ExpressCraft.Control.getImageStringURI(this.iconURL),appIconImage.style.backgroundSize="100% 100%",applicationIcon.appendChild(appIconImage),this.content.appendChild(applicationIcon)),this.getRibbonPages()!=null&&this.getRibbonPages().getCount()>0)for(width=58,i=0;i<this.getRibbonPages().getCount();i=i+1|0)(function(){var index,inwidth;this.getRibbonPages().getItem(i).render();this.type===ExpressCraft.RibbonControl.RibbonType.Compact?System.String.contains(this.getRibbonPages().getItem(i).content.className,"ribbonpage-compact")||this.getRibbonPages().getItem(i).content.classList.add("ribbonpage-compact"):System.String.contains(this.getRibbonPages().getItem(i).content.className,"ribbonpage-compact")&&this.getRibbonPages().getItem(i).content.classList.remove("ribbonpage-compact");index=i;i===this.selectedindex?(this.getRibbonPages().getItem(i).ribbonHeader=ExpressCraft.Control.createDiv$1(System.String.concat("ribbonpageheader ribbonpageheader-active",this.type===ExpressCraft.RibbonControl.RibbonType.Full?"":" ribbonpageheader-compact")),this.getRibbonPages().getItem(i).content.style.visibility="visible"):(this.getRibbonPages().getItem(i).ribbonHeader=ExpressCraft.Control.createDiv$1(System.String.concat("ribbonpageheader ribbonpageheader-hidden",this.type===ExpressCraft.RibbonControl.RibbonType.Full?"":" ribbonpageheader-compact")),this.getRibbonPages().getItem(i).content.style.visibility="hidden");this.getRibbonPages().getItem(i).ribbonHeader.onmousedown=Bridge.fn.bind(this,function(){this.setSelectedIndex(index)});this.getRibbonPages().getItem(i).ribbonHeader.ontouchstart=Bridge.fn.bind(this,function(){this.setSelectedIndex(index)});this.getRibbonPages().getItem(i).ribbonHeader.innerHTML=this.getRibbonPages().getItem(i).getCaption();inwidth=20;System.String.isNullOrEmpty(this.getRibbonPages().getItem(i).getCaption())||(inwidth=inwidth+Bridge.Int.clip32(this.getTextWidth(this.getRibbonPages().getItem(i).getCaption(),ExpressCraft.Settings.defaultFont))|0);this.getRibbonPages().getItem(i).ribbonHeader.style.left=width+"px";this.getRibbonPages().getItem(i).ribbonHeader.style.width=inwidth+"px";this.content.appendChild(this.getRibbonPages().getItem(i).ribbonHeader);this.content.appendChild(ExpressCraft.Control.op_Implicit(this.getRibbonPages().getItem(i)));width=width+inwidth|0}).call(this)}});Bridge.ns("ExpressCraft.RibbonControl",$asm.$);Bridge.apply($asm.$.ExpressCraft.RibbonControl,{f1:function(ev){ev.stopPropagation();ev.preventDefault()}});Bridge.define("ExpressCraft.RibbonGroup",{inherits:[ExpressCraft.Control],enabled:!0,captionDiv:null,riList:null,config:{properties:{Caption:null,Buttons:null}},ctor:function(_caption){_caption===void 0&&(_caption="");this.$initialize();ExpressCraft.Control.$ctor1.call(this,"ribbongroup");this.setCaption(_caption);this.setButtons(new(System.Collections.Generic.List$1(ExpressCraft.RibbonButton)))},$ctor1:function(_caption,buttons){buttons===void 0&&(buttons=[]);this.$initialize();ExpressCraft.Control.$ctor1.call(this,"ribbongroup");this.setCaption(_caption);this.setButtons(new(System.Collections.Generic.List$1(ExpressCraft.RibbonButton)));buttons!=null&&this.getButtons().addRange(buttons)},getEnabled:function(){return this.enabled},setEnabled:function(value){this.enabled=value;this.setEnabled$1(value)},setEnabled$1:function(value){if(this.getButtons().getCount()>0)for(var i=0;i<this.getButtons().getCount();i=i+1|0)value?this.getButtons().getItem(i).setEnabled$1(this.getButtons().getItem(i).getEnabled()):this.getButtons().getItem(i).setEnabled$1(value);this.changeState(value);value?this.captionDiv!=null&&this.captionDiv.classList.remove("disabled"):this.captionDiv!=null&&this.captionDiv.classList.add("disabled")},createVerticalLine:function(height){var htmlDiv=ExpressCraft.Control.createDiv$1("ribbonseperator");return height!==58&&(htmlDiv.style.height=height+"px"),htmlDiv},generateRList:function(){var ri=null,i;if(this.riList==null){for(this.riList=new(System.Collections.Generic.List$1(ExpressCraft.RibbonGroup.RenderInfo)),i=0;i<this.getButtons().getCount();i=i+1|0)ri==null?(ri=new ExpressCraft.RibbonGroup.RenderInfo,ri.firstButton=this.getButtons().getItem(i),ri.isSmall=ri.firstButton.isSmallCaption):ri.isSmall!==this.getButtons().getItem(i).isSmallCaption||this.getButtons().getItem(i).beginGroup||!this.getButtons().getItem(i).isSmallCaption||ri.firstButton!=null&&ri.secondButton!=null&&ri.thirdButton!=null?(this.riList.add(ri),ri=new ExpressCraft.RibbonGroup.RenderInfo,ri.firstButton=this.getButtons().getItem(i),ri.isSmall=this.getButtons().getItem(i).isSmallCaption,ri.beginGroup=this.getButtons().getItem(i).beginGroup):ri.secondButton==null?ri.secondButton=this.getButtons().getItem(i):ri.thirdButton=this.getButtons().getItem(i);ri!=null&&(this.riList.add(ri),ri=null)}},render:function(){var width,i,ri,vlbg,MaxWidth,inwidth,j,minWidth,vl;if(this.setHasRendered(!0),this.getButtons()!=null&&this.getButtons().getCount()!==0){for(this.generateRList(),width=0,i=0;i<this.riList.getCount();i=i+1|0)if(ri=this.riList.getItem(i),ri.beginGroup&&(width=width+3|0,vlbg=this.createVerticalLine(58),vlbg.style.left=width+"px",this.content.appendChild(vlbg)),width=width+3|0,ri.isSmall)ri.thirdButton==null?ri.secondButton==null?(MaxWidth=Math.max((Bridge.Int.clip32(this.getTextWidth(ri.firstButton.getCaption(),ExpressCraft.Settings.defaultFont))+28|0)+6|0,64),ri.firstButton.render(),ri.firstButton.content.style.left=width+"px",ri.firstButton.content.style.width=MaxWidth+"px",ri.firstButton.content.style.top="26px",this.content.appendChild(ExpressCraft.Control.op_Implicit(ri.firstButton))):(MaxWidth=Math.max((Math.max(Bridge.Int.clip32(this.getTextWidth(ri.firstButton.getCaption(),ExpressCraft.Settings.defaultFont)),Bridge.Int.clip32(this.getTextWidth(ri.secondButton.getCaption(),ExpressCraft.Settings.defaultFont)))+28|0)+6|0,64),ri.firstButton.render(),ri.secondButton.render(),ri.firstButton.content.style.left=width+"px",ri.secondButton.content.style.left=width+"px",ri.firstButton.content.style.top="21px",ri.firstButton.content.style.width=MaxWidth+"px",ri.secondButton.content.style.width=MaxWidth+"px",ri.firstButton.content.style.top="11px",ri.secondButton.content.style.top="41px",this.content.appendChild(ExpressCraft.Control.op_Implicit(ri.firstButton)),this.content.appendChild(ExpressCraft.Control.op_Implicit(ri.secondButton))):(MaxWidth=Math.max((Math.max(Bridge.Int.clip32(this.getTextWidth(ri.firstButton.getCaption(),ExpressCraft.Settings.defaultFont)),Bridge.Int.clip32(this.getTextWidth(ri.secondButton.getCaption(),ExpressCraft.Settings.defaultFont)),Bridge.Int.clip32(this.getTextWidth(ri.thirdButton.getCaption(),ExpressCraft.Settings.defaultFont)))+28|0)+6|0,64),ri.firstButton.render(),ri.secondButton.render(),ri.thirdButton.render(),ri.firstButton.content.style.left=width+"px",ri.secondButton.content.style.left=width+"px",ri.thirdButton.content.style.left=width+"px",ri.firstButton.content.style.width=MaxWidth+"px",ri.secondButton.content.style.width=MaxWidth+"px",ri.thirdButton.content.style.width=MaxWidth+"px",ri.firstButton.content.style.top="3px",ri.secondButton.content.style.top="26px",ri.thirdButton.content.style.top="49px",this.content.appendChild(ExpressCraft.Control.op_Implicit(ri.firstButton)),this.content.appendChild(ExpressCraft.Control.op_Implicit(ri.secondButton)),this.content.appendChild(ExpressCraft.Control.op_Implicit(ri.thirdButton))),width=width+MaxWidth|0;else{if(ri.firstButton.render(),ri.firstButton.content.style.left=width+"px",inwidth=0,System.String.contains(ri.firstButton.getCaption()," ")){var strings=ri.firstButton.getCaption().split(" "),builder=new System.Text.StringBuilder,length=Bridge.Int.div(ri.firstButton.getCaption().length,2)|0;for(j=0;j<strings.length;j=j+1|0){if(builder.getLength()>length){inwidth=Bridge.Int.clip32(this.getTextWidth(builder.toString(),ExpressCraft.Settings.defaultFont))+20|0;break}builder.getLength()>0?builder.append(System.String.concat(" ",strings[j])):builder.append(strings[j])}inwidth===0&&(inwidth=Bridge.Int.clip32(this.getTextWidth(builder.toString(),ExpressCraft.Settings.defaultFont))+20|0)}else inwidth=Bridge.Int.clip32(this.getTextWidth(ri.firstButton.getCaption(),ExpressCraft.Settings.defaultFont))+20|0;inwidth<44&&(inwidth=44);ri.firstButton.content.style.width=inwidth+"px";width=width+inwidth|0;this.content.appendChild(ExpressCraft.Control.op_Implicit(ri.firstButton))}minWidth=Bridge.Int.clip32(this.getTextWidth(this.getCaption(),ExpressCraft.Settings.defaultFont))+20|0;width<minWidth&&(width=minWidth);width=width+3|0;vl=this.createVerticalLine(80);vl.style.left=(width-1|0)+"px";this.content.appendChild(vl);this.content.style.width=width+"px";System.String.isNullOrWhiteSpace(this.getCaption())||(this.captionDiv=ExpressCraft.Control.createDiv$1("ribbongroupcaption"),this.captionDiv.innerHTML=this.getCaption(),this.content.appendChild(this.captionDiv));this.setEnabled$1(this.enabled)}}});Bridge.define("ExpressCraft.RibbonPage",{inherits:[ExpressCraft.Control],ribbonHeader:null,config:{properties:{Caption:null,RibbonGroups:null},init:function(){this.RibbonGroups=new(System.Collections.Generic.List$1(ExpressCraft.RibbonGroup))}},ctor:function(_caption){_caption===void 0&&(_caption="");this.$initialize();ExpressCraft.Control.$ctor1.call(this,"ribbonpage");this.setCaption(_caption)},addRibbonGroups:function(pages){pages===void 0&&(pages=[]);pages!=null&&this.getRibbonGroups().addRange(pages)},render:function(){var width,i;if(this.setHasRendered(!0),this.getRibbonGroups()!=null&&this.getRibbonGroups().getCount()!==0)for(width=0,i=0;i<this.getRibbonGroups().getCount();i=i+1|0)this.getRibbonGroups().getItem(i).render(),this.getRibbonGroups().getItem(i).content.style.left=width+"px",width=width+parseInt(this.getRibbonGroups().getItem(i).content.style.width)|0,this.content.appendChild(ExpressCraft.Control.op_Implicit(this.getRibbonGroups().getItem(i)))}});Bridge.define("ExpressCraft.SimpleButton",{inherits:[ExpressCraft.Control],itemClick:null,parentForm:null,dialogResult:0,enabled:!0,ctor:function(button){button===void 0&&(button=2);this.$initialize();ExpressCraft.Control.$ctor2.call(this,"simplebutton",button);this.content.oncontextmenu=$asm.$.ExpressCraft.SimpleButton.f1;ExpressCraft.Helper.setSize$3(this,"69px","20px");this.content.onclick=Bridge.fn.bind(this,$asm.$.ExpressCraft.SimpleButton.f2)},getText:function(){return this.content.innerHTML},setText:function(value){this.content.innerHTML=value},getEnabled:function(){return this.enabled},setEnabled:function(value){this.enabled=value;this.enabled?this.content.removeAttribute("disabled"):this.content.setAttribute("disabled",System.Boolean.toString(!this.enabled))}});Bridge.ns("ExpressCraft.SimpleButton",$asm.$);Bridge.apply($asm.$.ExpressCraft.SimpleButton,{f1:function(ev){ev.stopPropagation();ev.preventDefault()},f2:function(ev){this.enabled&&(this.content.blur(),this.dialogResult!==ExpressCraft.DialogResultEnum.None&&this.parentForm!=null&&this.parentForm.isDialog()&&(this.parentForm.dialogResult=this.dialogResult),Bridge.staticEquals(this.itemClick,null)||this.itemClick(this),this.dialogResult!==ExpressCraft.DialogResultEnum.None&&this.parentForm.dialogResult!==ExpressCraft.DialogResultEnum.None&&this.parentForm!=null&&this.parentForm.isDialog()&&this.parentForm.close());ev.stopPropagation()}});Bridge.define("ExpressCraft.TabControl",{inherits:[ExpressCraft.Control],selectedindex:0,config:{properties:{TabPages:null},init:function(){this.TabPages=new(System.Collections.Generic.List$1(ExpressCraft.TabControlPage))}},ctor:function(){this.$initialize();ExpressCraft.Control.$ctor1.call(this,"tabcontrol");this.content.oncontextmenu=$asm.$.ExpressCraft.TabControl.f1},getSelectedIndex:function(){return this.selectedindex},setSelectedIndex:function(value){var i,page;if(value<0&&(value=0),this.selectedindex=value,this.getTabPages()!=null&&this.getTabPages().getCount()>0)for(i=0;i<this.getTabPages().getCount();i=i+1|0)page={v:this.getTabPages().getItem(i)},this.tabControlActiveStyleChange(i,page),this.getTabPages().setItem(i,page.v)},addPages:function(Pages){Pages===void 0&&(Pages=[]);this.getTabPages().addRange(Pages)},tabControlActiveStyleChange:function(i,page){var Isselected=i===this.selectedindex,state=Isselected?"active":"hidden";page.v.tabPageHeader!=null?(page.v.tabPageHeader.classList.remove("tabcontrolpageheader-hidden"),page.v.tabPageHeader.classList.remove("tabcontrolpageheader-active"),page.v.tabPageHeader.classList.add(System.String.concat("tabcontrolpageheader-",state))):(page.v.tabPageHeader=ExpressCraft.Control.createDiv$1(System.String.concat("tabcontrolpageheader tabcontrolpageheader-",state)),page.v.tabPageHeader.setAttribute("i",i.toString()));page.v.content.style.visibility=Isselected?"inherit":"collapse"},resizeTabHeaders:function(){var width,i,page,inwidth;if(this.getTabPages()!=null&&this.getTabPages().getCount()>0)for(width=0,i=0;i<this.getTabPages().getCount();i=i+1|0)page={v:this.getTabPages().getItem(i)},page.v.render(),page.v.tabPageHeader==null&&(this.tabControlActiveStyleChange(i,page),Bridge.Browser.isAndroid||Bridge.Browser.iOS?page.v.tabPageHeader.ontouchstart=Bridge.fn.bind(this,$asm.$.ExpressCraft.TabControl.f2):page.v.tabPageHeader.onmousedown=Bridge.fn.bind(this,$asm.$.ExpressCraft.TabControl.f2),this.content.appendChild(page.v.content),this.content.appendChild(page.v.tabPageHeader)),page.v.tabPageHeader.innerHTML=page.v.getCaption(),inwidth=20,System.String.isNullOrEmpty(page.v.getCaption())||(inwidth=inwidth+Bridge.Int.clip32(this.getTextWidth(page.v.getCaption(),ExpressCraft.Settings.defaultFont))|0),page.v.tabPageHeader.style.left=width+"px",page.v.tabPageHeader.style.width=inwidth+"px",width=width+(inwidth+2|0)|0,this.getTabPages().setItem(i,page.v)},render:function(){this.setHasRendered(!0);this.resizeTabHeaders()}});Bridge.ns("ExpressCraft.TabControl",$asm.$);Bridge.apply($asm.$.ExpressCraft.TabControl,{f1:function(ev){ev.stopPropagation();ev.preventDefault()},f2:function(ev){this.setSelectedIndex(parseInt(ev.target.getAttribute("i")))}});Bridge.define("ExpressCraft.TabControlPage",{inherits:[ExpressCraft.Control],index:0,tabPageHeader:null,config:{properties:{Caption:null}},ctor:function(){this.$initialize();ExpressCraft.Control.$ctor1.call(this,"tabcontrolpage")}});Bridge.define("ExpressCraft.TextInput",{inherits:[ExpressCraft.Control],prevText:"",onTextChanged:null,onKeyDown:null,onKeyUp:null,onKeyPress:null,enabled:!0,_readonly:!1,ctor:function(type){type===void 0&&(type=19);this.$initialize();ExpressCraft.Control.$ctor3.call(this,"inputcontrol",type);this.content.onchange=Bridge.fn.bind(this,$asm.$.ExpressCraft.TextInput.f1);this.content.onkeypress=Bridge.fn.bind(this,$asm.$.ExpressCraft.TextInput.f2);this.content.onkeydown=Bridge.fn.bind(this,$asm.$.ExpressCraft.TextInput.f3);this.content.onkeyup=Bridge.fn.bind(this,$asm.$.ExpressCraft.TextInput.f4);this.content.addEventListener("paste",Bridge.fn.bind(this,$asm.$.ExpressCraft.TextInput.f5));this.content.addEventListener("cut",Bridge.fn.bind(this,$asm.$.ExpressCraft.TextInput.f5))},getText:function(){return this.content.value},setText:function(value){this.content.value=value;this.checkTextChanged()},getEnabled:function(){return this.enabled},setEnabled:function(value){this.enabled=value;this.content.setAttribute("disabled",System.Boolean.toString(!this.enabled))},getReadonly:function(){return this._readonly},setReadonly:function(value){this._readonly=value;this.content.setAttribute("readonly",System.Boolean.toString(this._readonly))},checkTextChanged:function(){if(!Bridge.referenceEquals(this.getText(),this.prevText)){if(!Bridge.staticEquals(this.onTextChanged,null))this.onTextChanged(this);this.prevText=this.getText()}},render:function(){ExpressCraft.Control.prototype.render.call(this);this.prevText=this.getText()}});Bridge.ns("ExpressCraft.TextInput",$asm.$);Bridge.apply($asm.$.ExpressCraft.TextInput,{f1:function(){this.checkTextChanged()},f2:function(ev){if(this.checkTextChanged(),!Bridge.staticEquals(this.onKeyPress,null))this.onKeyPress(this,ev)},f3:function(ev){if(this.checkTextChanged(),!Bridge.staticEquals(this.onKeyDown,null))this.onKeyDown(this,ev)},f4:function(ev){if(this.checkTextChanged(),!Bridge.staticEquals(this.onKeyUp,null))this.onKeyUp(this,ev)},f5:function(){this.checkTextChanged()}});Bridge.define("ExpressCraft.MessageBoxForm",{inherits:[ExpressCraft.Form],buttons:null,buttonOk:null,config:{init:function(){this.buttons=new(System.Collections.Generic.List$1(ExpressCraft.SimpleButton))}},ctor:function(message,title){title===void 0&&(title="");this.$initialize();ExpressCraft.Form.ctor.call(this);this.setText(title);this.getBody().innerHTML=message;this.setWidth("400px");this.setHeight("200px");this.buttonOk=Bridge.merge(new ExpressCraft.SimpleDialogButton(this,ExpressCraft.DialogResultEnum.OK),{setText:"Ok"});ExpressCraft.Helper.setLocation$5(this.buttonOk,"calc(100% - 78px)","calc(100% - 26px)");ExpressCraft.Helper.appendChildren$1(this.getBody(),[this.buttonOk]);this.buttonOk.content.tabIndex=0;this.allowSizeChange=!1},onShowed:function(){ExpressCraft.Form.prototype.onShowed.call(this);this.buttonOk.content.focus()}});Bridge.define("ExpressCraft.SimpleDialogButton",{inherits:[ExpressCraft.SimpleButton],ctor:function(parentForm,dialogResult){dialogResult===void 0&&(dialogResult=0);this.$initialize();ExpressCraft.SimpleButton.ctor.call(this);this.parentForm=parentForm;this.dialogResult=dialogResult;ExpressCraft.Helper.setSize$2(this,75,23)}});Bridge.define("ExpressCraft.StatusListForm",{inherits:[ExpressCraft.Form],ribbonControl:null,render:function(){var status;this.setHasRendered(!0);ExpressCraft.Helper.setBoundsFull(this);this.ribbonControl=new ExpressCraft.RibbonControl;status=new ExpressCraft.RibbonPage("Status Lists");status.addRibbonGroups([new ExpressCraft.RibbonGroup.$ctor1("Print and Export",[new ExpressCraft.RibbonButton("Print"),Bridge.merge(new ExpressCraft.RibbonButton("Print Picking Slip(s)"),{beginGroup:!0}),new ExpressCraft.RibbonButton("Print Unit Label(s)"),Bridge.merge(new ExpressCraft.RibbonButton("eMail List",!0),{beginGroup:!0}),new ExpressCraft.RibbonButton("Export as XLS",!0),new ExpressCraft.RibbonButton("Export as PDF",!0)]),new ExpressCraft.RibbonGroup.$ctor1("Actions",[new ExpressCraft.RibbonButton("Refresh")]),new ExpressCraft.RibbonGroup.$ctor1("Filters",[new ExpressCraft.RibbonButton("Show Total New Documents",!0)])]);var dataRecords=new ExpressCraft.RibbonPage("Data Records"),accounts=new ExpressCraft.RibbonPage("Accounts"),inventory=new ExpressCraft.RibbonPage("Inventory"),tools=new ExpressCraft.RibbonPage("Tools"),config=new ExpressCraft.RibbonPage("Configuration"),callCentre=new ExpressCraft.RibbonPage("Call Centre"),quickReports=new ExpressCraft.RibbonPage("Quick Reports"),design=new ExpressCraft.RibbonPage("Design");this.ribbonControl.addRibbonPages([status,dataRecords,accounts,inventory,tools,config,callCentre,quickReports,design]);this.content.appendChild(ExpressCraft.Control.op_Implicit(this.ribbonControl))}})});