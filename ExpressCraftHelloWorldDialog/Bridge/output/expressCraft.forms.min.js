Bridge.assembly("ExpressCraft",function($asm){"use strict";Bridge.define("ExpressCraft.forms.CloudPrintForm",{inherits:[ExpressCraft.Form],statics:{printerSetup:!1,inLoad:!1,gadget:null,setupPrinter:function(){if(!ExpressCraft.forms.CloudPrintForm.printerSetup){if(ExpressCraft.forms.CloudPrintForm.inLoad)return;ExpressCraft.forms.CloudPrintForm.inLoad=!0;document.head.appendChild(Bridge.merge(document.createElement("script"),{onload:$asm.$.ExpressCraft.forms.CloudPrintForm.f1,src:"https://www.google.com/cloudprint/client/cpgadget.js"}))}}},ctor:function(source,title,gcpmt,encoding){title===void 0&&(title="");gcpmt===void 0&&(gcpmt=0);encoding===void 0&&(encoding="");this.$initialize();ExpressCraft.Form.ctor.call(this);this.setText(title);var mimetype=System.String.replaceAll(System.Enum.format(ExpressCraft.GoogleCloudPrintingMimeType,gcpmt,"G").toLowerCase(),"_",".");System.String.isNullOrWhiteSpace(encoding)?ExpressCraft.forms.CloudPrintForm.gadget.setPrintDocument(mimetype,title,source):ExpressCraft.forms.CloudPrintForm.gadget.setPrintDocument(mimetype,title,source,encoding);this.close()},onShowing:function(){if(ExpressCraft.Form.prototype.onShowing.call(this),!ExpressCraft.forms.CloudPrintForm.printerSetup)throw new System.Exception("Google Cloud Printer library has not been loaded, use CloudPrintForm.SetupPrinter();");if(ExpressCraft.forms.CloudPrintForm.inLoad)throw new System.Exception("Google Cloud Printer library is currently loading, please try again in a couple of seconds.");}});Bridge.ns("ExpressCraft.forms.CloudPrintForm",$asm.$);Bridge.apply($asm.$.ExpressCraft.forms.CloudPrintForm,{f1:function(){ExpressCraft.forms.CloudPrintForm.printerSetup=!0;gadget=new cloudprint.Gadget}})});